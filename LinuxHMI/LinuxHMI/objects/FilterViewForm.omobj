<type ver="2" base-type-id="ffaf5544-6200-45f4-87ec-9dd24558a9d5" base-type="Form" uuid="0eb5fd44-6f82-41a2-83b6-c72fb7903de1" display-name="FilterForm_1" name="FilterViewForm" access-modifier="private">
	<designed target="X" value="0" ver="2"/>
	<designed target="Y" value="0" ver="2"/>
	<designed target="Rotation" value="0" ver="2"/>
	<designed target="Scale" value="1" ver="2"/>
	<designed target="Visible" value="true" ver="2"/>
	<designed target="Enabled" value="true" ver="2"/>
	<designed target="Tooltip" value="" ver="2"/>
	<designed target="Width" value="460" ver="2"/>
	<designed target="Height" value="460" ver="2"/>
	<designed target="PenColor" value="4278190080" ver="2"/>
	<designed target="PenStyle" value="0" ver="2"/>
	<designed target="PenWidth" value="1" ver="2"/>
	<designed target="BrushColor" value="4293980400" ver="2"/>
	<designed target="BrushStyle" value="1" ver="2"/>
	<designed target="WindowX" value="0" ver="2"/>
	<designed target="WindowY" value="0" ver="2"/>
	<designed target="WindowWidth" value="460" ver="2"/>
	<designed target="WindowHeight" value="460" ver="2"/>
	<designed target="WindowCaption" value="Фильтр отображения" ver="2"/>
	<designed target="ShowWindowCaption" value="false" ver="2"/>
	<designed target="ShowWindowMinimize" value="false" ver="2"/>
	<designed target="ShowWindowMaximize" value="false" ver="2"/>
	<designed target="ShowWindowClose" value="true" ver="2"/>
	<designed target="AlwaysOnTop" value="false" ver="2"/>
	<designed target="WindowSizeMode" value="0" ver="2"/>
	<designed target="WindowBorderStyle" value="1" ver="2"/>
	<designed target="WindowState" value="0" ver="2"/>
	<designed target="WindowScalingMode" value="0" ver="2"/>
	<designed target="MonitorNumber" value="0" ver="2"/>
	<designed target="WindowPosition" value="2" ver="2"/>
	<designed target="WindowCloseMode" value="0" ver="2"/>
	<object access-modifier="private" name="DebugTool_1" display-name="DebugTool_1" uuid="a0711e27-113b-4cf7-964e-83f9548d7d15" base-type="DebugTool" base-type-id="43946044-139a-43f4-a7b8-19a6074ffc56" ver="2"/>
	<object access-modifier="private" name="Conditions" display-name="Conditions" uuid="54aaf27e-ef57-496a-a1b0-00be78a4d6f9" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="2">
		<designed target="X" value="4" ver="2"/>
		<designed target="Y" value="35" ver="2"/>
		<designed target="Rotation" value="0" ver="2"/>
		<designed target="Scale" value="1" ver="2"/>
		<designed target="Visible" value="true" ver="2"/>
		<designed target="Enabled" value="true" ver="2"/>
		<designed target="Tooltip" value="" ver="2"/>
		<designed target="Width" value="452" ver="2"/>
		<designed target="Height" value="419" ver="2"/>
		<designed target="RoundingRadius" value="0" ver="2"/>
		<designed target="PenColor" value="0xffb3b3b3" ver="2"/>
		<designed target="PenStyle" value="1" ver="2"/>
		<designed target="PenWidth" value="1" ver="2"/>
		<designed target="BrushColor" value="4278190080" ver="2"/>
		<designed target="BrushStyle" value="0" ver="2"/>
		<object access-modifier="private" name="private" display-name="private" uuid="a2ad7bbc-ce22-4a84-8ec4-ac9ca5d875b4" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="2">
			<designed target="X" value="99" ver="2"/>
			<designed target="Y" value="-183.5" ver="2"/>
			<designed target="Rotation" value="0" ver="2"/>
			<designed target="Scale" value="1" ver="2"/>
			<designed target="Visible" value="false" ver="2"/>
			<designed target="Enabled" value="false" ver="2"/>
			<designed target="Tooltip" value="" ver="2"/>
			<designed target="Width" value="21" ver="2"/>
			<designed target="Height" value="17.5" ver="2"/>
			<designed target="RoundingRadius" value="0" ver="2"/>
			<designed target="PenColor" value="4278190080" ver="2"/>
			<designed target="PenStyle" value="0" ver="2"/>
			<designed target="PenWidth" value="1" ver="2"/>
			<designed target="BrushColor" value="4278190080" ver="2"/>
			<designed target="BrushStyle" value="0" ver="2"/>
			<object access-modifier="private" name="FilterString" display-name="FilterString" uuid="3d6e024e-904d-4325-9b4e-7cfef181b252" base-type="notifying_string" base-type-id="14976fbf-36ab-415f-abc3-9f8fdc217351" ver="2"/>
		</object>
		<object access-modifier="private" name="Button_Cancel" display-name="Button_Cancel" uuid="b290209a-f5ee-4e6f-9d08-d8585d69bec6" base-type="SystemButton" base-type-id="22504b6b-d24c-45e5-a9dd-6fb41e3d49c1" ver="2">
			<designed target="X" value="242" ver="2"/>
			<designed target="Y" value="388" ver="2"/>
			<designed target="Rotation" value="0" ver="2"/>
			<designed target="Scale" value="1" ver="2"/>
			<designed target="Visible" value="true" ver="2"/>
			<designed target="Enabled" value="true" ver="2"/>
			<designed target="Tooltip" value="" ver="2"/>
			<designed target="Width" value="75" ver="2"/>
			<designed target="Height" value="25" ver="2"/>
			<designed target="Text" value="Отмена" ver="2"/>
			<designed target="Font" value="Sans Serif,8,-1,5,50,0,0,0,0,0" ver="2"/>
			<designed target="FontColor" value="4278190080" ver="2"/>
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="2" event="ButtonPressed">
				<body kind="om">
					<![CDATA[Close();]]>
				</body>
			</do-on>
			<designed target="Checkable" value="false" ver="2"/>
		</object>
		<object access-modifier="private" name="Button_Apply" display-name="Button_Apply" uuid="42f0ca9a-8012-47c7-bd19-e9d7ebb2f23a" base-type="SystemButton" base-type-id="22504b6b-d24c-45e5-a9dd-6fb41e3d49c1" ver="2">
			<designed target="X" value="129" ver="2"/>
			<designed target="Y" value="388" ver="2"/>
			<designed target="Rotation" value="0" ver="2"/>
			<designed target="Scale" value="1" ver="2"/>
			<designed target="Visible" value="true" ver="2"/>
			<designed target="Enabled" value="true" ver="2"/>
			<designed target="Tooltip" value="" ver="2"/>
			<designed target="Width" value="75" ver="2"/>
			<designed target="Height" value="25" ver="2"/>
			<designed target="Checkable" value="false" ver="2"/>
			<designed target="Text" value="Применить" ver="2"/>
			<designed target="Font" value="Sans Serif,8,-1,5,50,0,0,0,0,0" ver="2"/>
			<designed target="FontColor" value="4278190080" ver="2"/>
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="3" event="ButtonPressed">
				<body kind="javascript">
					<![CDATA[var severityStr = Severity.TextEdit_1.Text;
var messageStr = Message.TextEdit_1.Text;
var sourceStr = Source.TextEdit_1.Text;
var userStr = AcknowledgeCondition.User.TextEdit_1.Text;
var commentStr = AcknowledgeCondition.Comment.TextEdit_1.Text;
var timeGenStr = TimeGen.TextEdit_1.Text;
var timeRunStr = TimeRun.TextEdit_1.Text;
var timeDeactivStr = TimeDeactiv.TextEdit_1.Text;
var timeAcknowStr = AcknowledgeCondition.TimeAcknow.TextEdit_1.Text;
var acknowState = AcknowledgeCondition.Acknow.ComboBox_1.SelectedIndex;
var objectInfo = {};
var JSONStr;
var Acknow;
var acknowStr;
var errorWord = 0x0;
var error = false;
objectInfo['AND'] = [];

Journal.Text_1.Text = "";

//Формируем JSON запрос в случае, если соответствующее поле фильтра заполнено
severityStr = MakeRequestJSONViewFilter(severityStr,"severity");
if (severityStr == "error") error = true;
else Link_Alarms.SetAdvancedFilterAsJson(Link_Alarms.Main_tables.Table_Operative_mode.Colum_6.Id, severityStr);

messageStr = MakeRequestJSONViewFilter(messageStr,"message");
if (messageStr == "error") error = true;
else Link_Alarms.SetAdvancedFilterAsJson(Link_Alarms.Main_tables.Table_Operative_mode.Colum_4.Id, messageStr);

sourceStr = MakeRequestJSONViewFilter(sourceStr,"message");
if (sourceStr == "error") error = true;
else Link_Alarms.SetAdvancedFilterAsJson(Link_Alarms.Main_tables.Table_Operative_mode.Colum_5.Id, sourceStr);

userStr = MakeRequestJSONViewFilter(userStr,"message");
if (userStr == "error") error = true;
else Link_Alarms.SetAdvancedFilterAsJson(Link_Alarms.Main_tables.Table_Operative_mode.Colum_9.Id, userStr);

commentStr = MakeRequestJSONViewFilter(commentStr,"message");
if (commentStr == "error") error = true;
else Link_Alarms.SetAdvancedFilterAsJson(Link_Alarms.Main_tables.Table_Operative_mode.Colum_10.Id, commentStr);

timeGenStr = MakeRequestJSONViewFilter(timeGenStr,"time");
if (timeGenStr == "error") error = true;
else Link_Alarms.SetAdvancedFilterAsJson(Link_Alarms.Main_tables.Table_Operative_mode.Colum_1.Id, timeGenStr);

timeRunStr = MakeRequestJSONViewFilter(timeRunStr,"time");
if (timeRunStr == "error") error = true;
else Link_Alarms.SetAdvancedFilterAsJson(Link_Alarms.Main_tables.Table_Operative_mode.Colum_2.Id, timeRunStr);

timeDeactivStr = MakeRequestJSONViewFilter(timeDeactivStr,"time");
if (timeDeactivStr == "error") error = true;
else Link_Alarms.SetAdvancedFilterAsJson(Link_Alarms.Main_tables.Table_Operative_mode.Colum_3.Id, timeDeactivStr);

timeAcknowStr = MakeRequestJSONViewFilter(timeAcknowStr,"time");
if (timeAcknowStr == "error") error = true;
else Link_Alarms.SetAdvancedFilterAsJson(Link_Alarms.Main_tables.Table_Operative_mode.Colum_8.Id, timeAcknowStr);

if (AcknowledgeCondition.Acknow.ComboBox_1.GetItem(acknowState) != "Все") 
{
	if (AcknowledgeCondition.Acknow.ComboBox_1.GetItem(acknowState) == "Квитированные")
	{
		Acknow = {"=": 1};
		acknowStr = JSON.stringify(Acknow);
	}
	else
	{
		Acknow = {"=": 0};
		acknowStr = JSON.stringify(Acknow);
	}
}
else acknowStr = "";
Link_Alarms.SetAdvancedFilterAsJson(Link_Alarms.Main_tables.Table_Operative_mode.Colum_7.Id, acknowStr);

//Вызываем функцию записи расширенного фильтра отображения
errorWord = Link_Alarms.Main_panel.private.errorWord;
//Проверяем наличие ошибок и сохраняем
if ((errorWord & 0x1) == 0x1 || timeGenStr == "error") TimeGen.RecBorder_Alarm.Visible = true;
else Link_Alarms.Main_panel.private.ViewFilter.timeGenView = TimeGen.TextEdit_1.Text;
if ((errorWord & 0x2) == 0x2 || timeRunStr == "error") TimeRun.RecBorder_Alarm.Visible = true;
else Link_Alarms.Main_panel.private.ViewFilter.timeRunView = TimeRun.TextEdit_1.Text;
if ((errorWord & 0x4) == 0x4 || timeDeactivStr == "error") TimeDeactiv.RecBorder_Alarm.Visible = true;
else Link_Alarms.Main_panel.private.ViewFilter.timeDeactivView = TimeDeactiv.TextEdit_1.Text;
if ((errorWord & 0x8) == 0x8 || messageStr == "error") Message.RecBorder_Alarm.Visible = true;
else Link_Alarms.Main_panel.private.ViewFilter.messageView = Message.TextEdit_1.Text;
if ((errorWord & 0x10) == 0x10 || sourceStr == "error") Source.RecBorder_Alarm.Visible = true;
else Link_Alarms.Main_panel.private.ViewFilter.sourceView = Source.TextEdit_1.Text;
if ((errorWord & 0x20) == 0x20 || severityStr == "error") Severity.RecBorder_Alarm.Visible = true;
else Link_Alarms.Main_panel.private.ViewFilter.severityView = Severity.TextEdit_1.Text;
if ((errorWord & 0x80) == 0x80 || timeAcknowStr == "error")  AcknowledgeCondition.TimeAcknow.RecBorder_Alarm.Visible = true;
else Link_Alarms.Main_panel.private.ViewFilter.timeAcknowView = AcknowledgeCondition.TimeAcknow.TextEdit_1.Text;
if ((errorWord & 0x100) == 0x100 || userStr == "error") User.RecBorder_Alarm.Visible = true;
else Link_Alarms.Main_panel.private.ViewFilter.userView = AcknowledgeCondition.User.TextEdit_1.Text;
if ((errorWord & 0x200) == 0x200 || commentStr == "error") Comment.RecBorder_Alarm.Visible = true;
else Link_Alarms.Main_panel.private.ViewFilter.commentView = AcknowledgeCondition.Comment.TextEdit_1.Text;

Link_Alarms.Main_panel.private.ViewFilter.acknowView = AcknowledgeCondition.Acknow.ComboBox_1.GetItem(AcknowledgeCondition.Acknow.ComboBox_1.SelectedIndex);
Link_Alarms.Main_panel.private.selRowsJSON.Value = "[]";

//Функция вывода данных после запроса
if (errorWord == 0 && !error) Close();
else Journal.Text_1.Text = "Ошибка формирования запроса фильтра. Проверьте корректность введенных данных";


]]>
				</body>
			</do-on>
		</object>
		<object access-modifier="private" name="private" display-name="private" uuid="b4ad26c0-c140-44ee-a68d-3d28c20aaa04" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="2">
			<designed target="X" value="603.619" ver="2"/>
			<designed target="Y" value="-163.381" ver="2"/>
			<designed target="Rotation" value="0" ver="2"/>
			<designed target="Scale" value="1" ver="2"/>
			<designed target="Visible" value="true" ver="2"/>
			<designed target="Enabled" value="true" ver="2"/>
			<designed target="Tooltip" value="" ver="2"/>
			<designed target="Width" value="9.42857" ver="2"/>
			<designed target="Height" value="5.42857" ver="2"/>
			<designed target="RoundingRadius" value="0" ver="2"/>
			<designed target="PenColor" value="4278190080" ver="2"/>
			<designed target="PenStyle" value="0" ver="2"/>
			<designed target="PenWidth" value="1" ver="2"/>
			<designed target="BrushColor" value="4278190080" ver="2"/>
			<designed target="BrushStyle" value="0" ver="2"/>
		</object>
		<object access-modifier="private" name="Severity" display-name="Severity" uuid="eb783d7f-4da4-472f-bc34-e1d65b4eaae5" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="2">
			<designed target="X" value="14" ver="2"/>
			<designed target="Y" value="129" ver="2"/>
			<designed target="Rotation" value="0" ver="2"/>
			<designed target="Scale" value="1" ver="2"/>
			<designed target="Visible" value="true" ver="2"/>
			<designed target="Enabled" value="true" ver="2"/>
			<designed target="Tooltip" value="" ver="2"/>
			<designed target="Width" value="177" ver="2"/>
			<designed target="Height" value="30" ver="2"/>
			<designed target="RoundingRadius" value="0" ver="2"/>
			<designed target="PenColor" value="4278190080" ver="2"/>
			<designed target="PenStyle" value="0" ver="2"/>
			<designed target="PenWidth" value="0" ver="2"/>
			<designed target="BrushColor" value="4278190080" ver="2"/>
			<designed target="BrushStyle" value="0" ver="2"/>
			<object access-modifier="private" name="Text_1" display-name="Text_1" uuid="6b4617e7-b338-4363-b9ec-ef62901bd6fc" base-type="Text" base-type-id="21d59f8d-2ca4-4592-92ca-b4dc48992a0f" ver="2">
				<designed target="X" value="-3.86633" ver="2"/>
				<designed target="Y" value="5" ver="2"/>
				<designed target="Rotation" value="0" ver="2"/>
				<designed target="Scale" value="1" ver="2"/>
				<designed target="Visible" value="true" ver="2"/>
				<designed target="Enabled" value="true" ver="2"/>
				<designed target="Tooltip" value="" ver="2"/>
				<designed target="Width" value="165.517" ver="2"/>
				<designed target="Height" value="20" ver="2"/>
				<designed target="Text" value="Важность:" ver="2"/>
				<designed target="Font" value="Sans Serif,9,-1,5,50,0,0,0,0,0" ver="2"/>
				<designed target="FontColor" value="4278190080" ver="2"/>
				<designed target="TextAlignment" value="129" ver="2"/>
			</object>
			<object access-modifier="private" name="TextEdit_1" display-name="TextEdit_1" uuid="f2585756-c62e-4700-a153-aab54c9b552f" base-type="TextEdit" base-type-id="53a97863-93f3-45a1-a2ea-9ff98d2dcdd9" ver="2">
				<designed target="X" value="176" ver="2"/>
				<designed target="Y" value="5" ver="2"/>
				<designed target="Rotation" value="0" ver="2"/>
				<designed target="Scale" value="1" ver="2"/>
				<designed target="Visible" value="true" ver="2"/>
				<designed target="Enabled" value="true" ver="2"/>
				<designed target="Tooltip" value="" ver="2"/>
				<designed target="Width" value="254" ver="2"/>
				<designed target="Height" value="25" ver="2"/>
				<designed target="Text" value="" ver="2"/>
				<designed target="Font" value="Sans Serif,8,-1,5,50,0,0,0,0,0" ver="2"/>
				<designed target="FontColor" value="4278190080" ver="2"/>
				<designed target="TextAlignment" value="129" ver="2"/>
				<designed target="HideInput" value="false" ver="2"/>
				<designed target="PlaceholderText" value="" ver="2"/>
				<designed target="ReadOnly" value="false" ver="2"/>
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="2" event="EditFinished">
					<body kind="javascript">
						<![CDATA[Severity.RecBorder_Alarm.Visible = false;
//log(CheckValueInt(me.Text));
/*var str = Severity.TextEdit_1.Text;
//Инициализируем шаблоны
//последовательная запись аргументов
var mask1 = /[><=]\d+\s*[><=]\d+/g;
//повторение знаков
var mask2 = /[>]{2}|[<]{2}|[=]{2}|(><)|(<>)/g;
//наличие букв латинского алфавита
var mask3 = /\D[A-Za-z]/g;
//проверка на соответствие записи типа аргумент-операнд-аргумент
var mask4 =/[!><=]*\d*[()]*\s*(\&\s*(НЕ)?[!]?|И\s*(НЕ)?[!]?|ИЛИ\s*(НЕ)?[!]?|\|\s*(НЕ)?[!]?|\s*(НЕ)?\s*[!]?){1}\s*[()]*[!><=]+\d+/g;
//наличие кириллицы
var mask5 = /[А-Яа-я]/g;
var count = 0;
//общий паттерн
var elementPattern = /([(]|[)]|(НЕ)|(ИЛИ)|(И)|[!]|[&]|[|]|[<>=\d*]+)/igu;
var errorArray = [];
var commonArray = [];

commonArray = str.match(elementPattern);
//опеределяем количество скобок
if (commonArray != null) 
{
	for (let i = 0; i < commonArray.length; i++)
	{
		if (commonArray[i] == "(") count++;
		if (commonArray[i] == ")") count--;
	}
}
//тестируем строку по каждому шаблону
errorArray.push(mask1.test(str));
errorArray.push(mask2.test(str));
errorArray.push(mask3.test(str));
//в этих случаях несовпадение с шаблоном = неправильная запись
str = str.replace(mask4,"");
errorArray.push(mask5.test(str));
//удаляем правильные совпадения
str = str.replace(/[!]*[><=]+\d+/g,"");
str = str.replace(/[(]/g,"");
str = str.replace(/[)]/g,"");
//если в строке что-то осталось или массив ошибок содержит ошибки, то подсвечиваем рамку
if ((str.length > 0 && str != "")|| errorArray[0] || errorArray[1] || errorArray[2] || errorArray[3] || count != 0) 
{
	Severity.RecBorder_Alarm.Visible = true;
	Journal.Text_1.Text = "Условия фильтрации содержат ошибки";
}
bErrorFlag = Severity.RecBorder_Alarm.Visible;*/]]>
					</body>
				</do-on>
			</object>
			<object access-modifier="private" name="RecBorder_Alarm" display-name="RecBorder_Alarm" uuid="d333ca44-97df-4bb5-b8e3-bb89dcb20d40" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="2">
				<designed target="X" value="176.334" ver="2"/>
				<designed target="Y" value="5" ver="2"/>
				<designed target="Rotation" value="0" ver="2"/>
				<designed target="Scale" value="1" ver="2"/>
				<designed target="Visible" value="false" ver="2"/>
				<designed target="Enabled" value="true" ver="2"/>
				<designed target="Tooltip" value="" ver="2"/>
				<designed target="Width" value="253" ver="2"/>
				<designed target="Height" value="20" ver="2"/>
				<designed target="RoundingRadius" value="0" ver="2"/>
				<designed target="PenColor" value="0xffff0000" ver="2"/>
				<designed target="PenStyle" value="1" ver="2"/>
				<designed target="PenWidth" value="2" ver="2"/>
				<designed target="BrushColor" value="4278190080" ver="2"/>
				<designed target="BrushStyle" value="0" ver="2"/>
				<object access-modifier="private" name="Text_Alarm" display-name="Text_Alarm" uuid="5d2000de-185d-47ed-8694-240664083779" base-type="Text" base-type-id="21d59f8d-2ca4-4592-92ca-b4dc48992a0f" ver="2">
					<designed target="X" value="-6.82143" ver="2"/>
					<designed target="Y" value="1.84524" ver="2"/>
					<designed target="Rotation" value="0" ver="2"/>
					<designed target="Scale" value="1" ver="2"/>
					<designed target="Visible" value="true" ver="2"/>
					<designed target="Enabled" value="true" ver="2"/>
					<designed target="Tooltip" value="" ver="2"/>
					<designed target="Width" value="6.16667" ver="2"/>
					<designed target="Height" value="16.5" ver="2"/>
					<designed target="Text" value="!" ver="2"/>
					<designed target="Font" value="MS Shell Dlg 2,10,-1,5,75,0,0,0,0,0,Полужирный" ver="2"/>
					<designed target="FontColor" value="0xffff0000" ver="2"/>
					<designed target="TextAlignment" value="33" ver="2"/>
				</object>
			</object>
		</object>
		<object access-modifier="private" name="Message" display-name="Message" uuid="92484224-2934-444c-86df-3ba35fe31f67" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="2">
			<designed target="X" value="14" ver="2"/>
			<designed target="Y" value="99" ver="2"/>
			<designed target="Rotation" value="0" ver="2"/>
			<designed target="Scale" value="1" ver="2"/>
			<designed target="Visible" value="true" ver="2"/>
			<designed target="Enabled" value="true" ver="2"/>
			<designed target="Tooltip" value="" ver="2"/>
			<designed target="Width" value="177.666" ver="2"/>
			<designed target="Height" value="30" ver="2"/>
			<designed target="RoundingRadius" value="0" ver="2"/>
			<designed target="PenColor" value="4278190080" ver="2"/>
			<designed target="PenStyle" value="0" ver="2"/>
			<designed target="PenWidth" value="0" ver="2"/>
			<designed target="BrushColor" value="4278190080" ver="2"/>
			<designed target="BrushStyle" value="0" ver="2"/>
			<object access-modifier="private" name="Text_1" display-name="Text_1" uuid="e847726c-eb82-4560-9a1b-19e388a8a6e8" base-type="Text" base-type-id="21d59f8d-2ca4-4592-92ca-b4dc48992a0f" ver="2">
				<designed target="X" value="-3.86633" ver="2"/>
				<designed target="Y" value="4" ver="2"/>
				<designed target="Rotation" value="0" ver="2"/>
				<designed target="Scale" value="1" ver="2"/>
				<designed target="Visible" value="true" ver="2"/>
				<designed target="Enabled" value="true" ver="2"/>
				<designed target="Tooltip" value="" ver="2"/>
				<designed target="Width" value="165.517" ver="2"/>
				<designed target="Height" value="20" ver="2"/>
				<designed target="Text" value="Сообщение:" ver="2"/>
				<designed target="Font" value="Sans Serif,9,-1,5,50,0,0,0,0,0" ver="2"/>
				<designed target="FontColor" value="4278190080" ver="2"/>
				<designed target="TextAlignment" value="129" ver="2"/>
			</object>
			<object access-modifier="private" name="TextEdit_1" display-name="TextEdit_1" uuid="65e1cac6-cbe9-4448-b82c-44c0977cc783" base-type="TextEdit" base-type-id="53a97863-93f3-45a1-a2ea-9ff98d2dcdd9" ver="2">
				<designed target="X" value="176" ver="2"/>
				<designed target="Y" value="5" ver="2"/>
				<designed target="Rotation" value="0" ver="2"/>
				<designed target="Scale" value="1" ver="2"/>
				<designed target="Visible" value="true" ver="2"/>
				<designed target="Enabled" value="true" ver="2"/>
				<designed target="Tooltip" value="" ver="2"/>
				<designed target="Width" value="254" ver="2"/>
				<designed target="Height" value="25" ver="2"/>
				<designed target="Text" value="" ver="2"/>
				<designed target="Font" value="Sans Serif,8,-1,5,50,0,0,0,0,0" ver="2"/>
				<designed target="FontColor" value="0xff000000" ver="2"/>
				<designed target="TextAlignment" value="129" ver="2"/>
				<designed target="HideInput" value="false" ver="2"/>
				<designed target="PlaceholderText" value="" ver="2"/>
				<designed target="ReadOnly" value="false" ver="2"/>
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="2" event="EditFinished">
					<body kind="javascript">
						<![CDATA[Message.RecBorder_Alarm.Visible = false;
/*var str = Message.TextEdit_1.Text;
//Инициализируем шаблоны
//повторение знаков
var mask1 = /[!]{2}|[=]{2}/g;
var count = 0;

//паттерн элемента
var elementPattern = /[(]|[)]|(НЕ)|(ИЛИ)|(И)|[!]|[&]|[|]|(\s*[А-Яа-я0-9A-Za-z ?!=;,._-]*[^&()|]\s*)/g;
//паттер оператора
var operatorPattern = /([&])|([ИЛИ]+)|([|])|(И)/g;
var errorArray = [];
var commonArray = [];

commonArray = str.match(elementPattern);
//опеределяем количество скобок
if (commonArray != null) 
{
	for (let i = 0; i < commonArray.length; i++)
	{
		if (commonArray[i] == "(") count++;
		if (commonArray[i] == ")") count--;
	}
}
//тестируем строку по каждому шаблону
errorArray.push(mask1.test(str));
//если в строке что-то осталось или массив ошибок содержит ошибки, то подсвечиваем рамку
if (errorArray[0] || count != 0) 
{
	Message.RecBorder_Alarm.Visible = true;
	Journal.Text_1.Text = "Условия фильтрации содержат ошибки";
}
bErrorFlag = Message.RecBorder_Alarm.Visible;
*/]]>
					</body>
				</do-on>
			</object>
			<object access-modifier="private" name="RecBorder_Alarm" display-name="RecBorder_Alarm" uuid="4b9f5e4e-96c8-4f67-a210-cc3b0896e064" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="2">
				<designed target="X" value="176.334" ver="2"/>
				<designed target="Y" value="5" ver="2"/>
				<designed target="Rotation" value="0" ver="2"/>
				<designed target="Scale" value="1" ver="2"/>
				<designed target="Visible" value="false" ver="2"/>
				<designed target="Enabled" value="true" ver="2"/>
				<designed target="Tooltip" value="" ver="2"/>
				<designed target="Width" value="253" ver="2"/>
				<designed target="Height" value="20" ver="2"/>
				<designed target="RoundingRadius" value="0" ver="2"/>
				<designed target="PenColor" value="0xffff0000" ver="2"/>
				<designed target="PenStyle" value="1" ver="2"/>
				<designed target="PenWidth" value="2" ver="2"/>
				<designed target="BrushColor" value="4278190080" ver="2"/>
				<designed target="BrushStyle" value="0" ver="2"/>
				<object access-modifier="private" name="Text_Alarm" display-name="Text_Alarm" uuid="7789f62c-b50c-4030-811f-0d8d3763fbe9" base-type="Text" base-type-id="21d59f8d-2ca4-4592-92ca-b4dc48992a0f" ver="2">
					<designed target="X" value="-6.82143" ver="2"/>
					<designed target="Y" value="1.84524" ver="2"/>
					<designed target="Rotation" value="0" ver="2"/>
					<designed target="Scale" value="1" ver="2"/>
					<designed target="Visible" value="true" ver="2"/>
					<designed target="Enabled" value="true" ver="2"/>
					<designed target="Tooltip" value="" ver="2"/>
					<designed target="Width" value="6.16667" ver="2"/>
					<designed target="Height" value="16.5" ver="2"/>
					<designed target="Text" value="!" ver="2"/>
					<designed target="Font" value="MS Shell Dlg 2,10,-1,5,75,0,0,0,0,0,Полужирный" ver="2"/>
					<designed target="FontColor" value="0xffff0000" ver="2"/>
					<designed target="TextAlignment" value="33" ver="2"/>
				</object>
			</object>
		</object>
		<object access-modifier="private" name="Source" display-name="Source" uuid="9f288c99-d4c2-4976-a81c-ce0125248618" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="2">
			<designed target="X" value="14.5" ver="2"/>
			<designed target="Y" value="160.5" ver="2"/>
			<designed target="Rotation" value="0" ver="2"/>
			<designed target="Scale" value="1" ver="2"/>
			<designed target="Visible" value="true" ver="2"/>
			<designed target="Enabled" value="true" ver="2"/>
			<designed target="Tooltip" value="" ver="2"/>
			<designed target="Width" value="176.333" ver="2"/>
			<designed target="Height" value="30" ver="2"/>
			<designed target="RoundingRadius" value="0" ver="2"/>
			<designed target="PenColor" value="4278190080" ver="2"/>
			<designed target="PenStyle" value="0" ver="2"/>
			<designed target="PenWidth" value="0" ver="2"/>
			<designed target="BrushColor" value="4278190080" ver="2"/>
			<designed target="BrushStyle" value="0" ver="2"/>
			<object access-modifier="private" name="Text_1" display-name="Text_1" uuid="db6826c1-a205-42d3-b7ff-7d7cb38414d8" base-type="Text" base-type-id="21d59f8d-2ca4-4592-92ca-b4dc48992a0f" ver="2">
				<designed target="X" value="-4.36633" ver="2"/>
				<designed target="Y" value="3" ver="2"/>
				<designed target="Rotation" value="0" ver="2"/>
				<designed target="Scale" value="1" ver="2"/>
				<designed target="Visible" value="true" ver="2"/>
				<designed target="Enabled" value="true" ver="2"/>
				<designed target="Tooltip" value="" ver="2"/>
				<designed target="Width" value="165.517" ver="2"/>
				<designed target="Height" value="20" ver="2"/>
				<designed target="Text" value="Источник:" ver="2"/>
				<designed target="Font" value="Sans Serif,9,-1,5,50,0,0,0,0,0" ver="2"/>
				<designed target="FontColor" value="4278190080" ver="2"/>
				<designed target="TextAlignment" value="129" ver="2"/>
			</object>
			<object access-modifier="private" name="TextEdit_1" display-name="TextEdit_1" uuid="fdd3cedf-b8b6-4301-b19a-d89bd2c50a93" base-type="TextEdit" base-type-id="53a97863-93f3-45a1-a2ea-9ff98d2dcdd9" ver="2">
				<designed target="X" value="176" ver="2"/>
				<designed target="Y" value="5" ver="2"/>
				<designed target="Rotation" value="0" ver="2"/>
				<designed target="Scale" value="1" ver="2"/>
				<designed target="Visible" value="true" ver="2"/>
				<designed target="Enabled" value="true" ver="2"/>
				<designed target="Tooltip" value="" ver="2"/>
				<designed target="Width" value="254" ver="2"/>
				<designed target="Height" value="25" ver="2"/>
				<designed target="Text" value="" ver="2"/>
				<designed target="Font" value="Sans Serif,8,-1,5,50,0,0,0,0,0" ver="2"/>
				<designed target="FontColor" value="0xff000000" ver="2"/>
				<designed target="TextAlignment" value="129" ver="2"/>
				<designed target="HideInput" value="false" ver="2"/>
				<designed target="PlaceholderText" value="" ver="2"/>
				<designed target="ReadOnly" value="false" ver="2"/>
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="2" event="EditFinished">
					<body kind="javascript">
						<![CDATA[Source.RecBorder_Alarm.Visible = false;
/*var str = Source.TextEdit_1.Text;
//Инициализируем шаблоны
//повторение знаков
var mask1 = /[!]{2}|[=]{2}/g;
var count = 0;

//общий паттерн
var elementPattern = /([(]|[)]|(НЕ)|(ИЛИ)|(И)|[!]|[&]|[|]|[<>=\d*\w*[А-Яа-я]+)/igu;
var errorArray = [];

var commonArray = str.match(elementPattern);
//опеределяем количество скобок
if (commonArray != null) 
{
	for (let i = 0; i < commonArray.length; i++)
	{
		if (commonArray[i] == "(") count++;
		if (commonArray[i] == ")") count--;
	}
}
//тестируем строку по каждому шаблону
errorArray.push(mask1.test(str));
//если в строке что-то осталось или массив ошибок содержит ошибки, то подсвечиваем рамку
if (errorArray[0] || count != 0) 
{
	Source.RecBorder_Alarm.Visible = true;
	Journal.Text_1.Text = "Условия фильтрации содержат ошибки";
}
bErrorFlag = Source.RecBorder_Alarm.Visible;*/]]>
					</body>
				</do-on>
			</object>
			<object access-modifier="private" name="RecBorder_Alarm" display-name="RecBorder_Alarm" uuid="9703f8b0-2377-4bef-b72e-2e3b19f5333f" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="2">
				<designed target="X" value="175.834" ver="2"/>
				<designed target="Y" value="5" ver="2"/>
				<designed target="Rotation" value="0" ver="2"/>
				<designed target="Scale" value="1" ver="2"/>
				<designed target="Visible" value="false" ver="2"/>
				<designed target="Enabled" value="true" ver="2"/>
				<designed target="Tooltip" value="" ver="2"/>
				<designed target="Width" value="253" ver="2"/>
				<designed target="Height" value="20" ver="2"/>
				<designed target="RoundingRadius" value="0" ver="2"/>
				<designed target="PenColor" value="0xffff0000" ver="2"/>
				<designed target="PenStyle" value="1" ver="2"/>
				<designed target="PenWidth" value="2" ver="2"/>
				<designed target="BrushColor" value="4278190080" ver="2"/>
				<designed target="BrushStyle" value="0" ver="2"/>
				<object access-modifier="private" name="Text_Alarm" display-name="Text_Alarm" uuid="20d1c7e4-6656-407a-8011-1bbc6d412c54" base-type="Text" base-type-id="21d59f8d-2ca4-4592-92ca-b4dc48992a0f" ver="2">
					<designed target="X" value="-6.82143" ver="2"/>
					<designed target="Y" value="1.84524" ver="2"/>
					<designed target="Rotation" value="0" ver="2"/>
					<designed target="Scale" value="1" ver="2"/>
					<designed target="Visible" value="true" ver="2"/>
					<designed target="Enabled" value="true" ver="2"/>
					<designed target="Tooltip" value="" ver="2"/>
					<designed target="Width" value="6.16667" ver="2"/>
					<designed target="Height" value="16.5" ver="2"/>
					<designed target="Text" value="!" ver="2"/>
					<designed target="Font" value="MS Shell Dlg 2,10,-1,5,75,0,0,0,0,0,Полужирный" ver="2"/>
					<designed target="FontColor" value="0xffff0000" ver="2"/>
					<designed target="TextAlignment" value="33" ver="2"/>
				</object>
			</object>
		</object>
		<object access-modifier="private" name="Journal" display-name="Journal" uuid="4247ab06-88f2-4392-9ce6-e57b0747c3a2" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="2">
			<designed target="X" value="3.33333" ver="2"/>
			<designed target="Y" value="339.4" ver="2"/>
			<designed target="Rotation" value="0" ver="2"/>
			<designed target="Scale" value="1" ver="2"/>
			<designed target="Visible" value="true" ver="2"/>
			<designed target="Enabled" value="true" ver="2"/>
			<designed target="Tooltip" value="" ver="2"/>
			<designed target="Width" value="444.333" ver="2"/>
			<designed target="Height" value="36" ver="2"/>
			<designed target="RoundingRadius" value="0" ver="2"/>
			<designed target="PenColor" value="0xffb3b3b3" ver="2"/>
			<designed target="PenStyle" value="1" ver="2"/>
			<designed target="PenWidth" value="1" ver="2"/>
			<designed target="BrushColor" value="4278190080" ver="2"/>
			<designed target="BrushStyle" value="0" ver="2"/>
			<object access-modifier="private" name="Text_1" display-name="Text_1" uuid="d1e04b2b-92a0-4f16-8298-51bde20b1b9c" base-type="Text" base-type-id="21d59f8d-2ca4-4592-92ca-b4dc48992a0f" ver="2">
				<designed target="X" value="4.4" ver="2"/>
				<designed target="Y" value="2" ver="2"/>
				<designed target="Rotation" value="0" ver="2"/>
				<designed target="Scale" value="1" ver="2"/>
				<designed target="Visible" value="true" ver="2"/>
				<designed target="Enabled" value="true" ver="2"/>
				<designed target="Tooltip" value="" ver="2"/>
				<designed target="Width" value="428" ver="2"/>
				<designed target="Height" value="31" ver="2"/>
				<designed target="Text" value="Заполните поля фильтра" ver="2"/>
				<designed target="Font" value="Sans Serif,8,-1,5,50,0,0,0,0,0" ver="2"/>
				<designed target="FontColor" value="4278190080" ver="2"/>
				<designed target="TextAlignment" value="129" ver="2"/>
			</object>
		</object>
		<object access-modifier="private" name="TimeGen" display-name="TimeGen" uuid="9ff94dd9-6fca-4e23-b7aa-11ec4768c395" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="2">
			<designed target="X" value="13" ver="2"/>
			<designed target="Y" value="9" ver="2"/>
			<designed target="Rotation" value="0" ver="2"/>
			<designed target="Scale" value="1" ver="2"/>
			<designed target="Visible" value="true" ver="2"/>
			<designed target="Enabled" value="true" ver="2"/>
			<designed target="Tooltip" value="" ver="2"/>
			<designed target="Width" value="178.333" ver="2"/>
			<designed target="Height" value="30" ver="2"/>
			<designed target="RoundingRadius" value="0" ver="2"/>
			<designed target="PenColor" value="4278190080" ver="2"/>
			<designed target="PenStyle" value="0" ver="2"/>
			<designed target="PenWidth" value="0" ver="2"/>
			<designed target="BrushColor" value="4278190080" ver="2"/>
			<designed target="BrushStyle" value="0" ver="2"/>
			<object access-modifier="private" name="Text_1" display-name="Text_1" uuid="efe5e58f-6c1d-4858-bd2c-cc3f1f13bae2" base-type="Text" base-type-id="21d59f8d-2ca4-4592-92ca-b4dc48992a0f" ver="2">
				<designed target="X" value="-2.86633" ver="2"/>
				<designed target="Y" value="5" ver="2"/>
				<designed target="Rotation" value="0" ver="2"/>
				<designed target="Scale" value="1" ver="2"/>
				<designed target="Visible" value="true" ver="2"/>
				<designed target="Enabled" value="true" ver="2"/>
				<designed target="Tooltip" value="" ver="2"/>
				<designed target="Width" value="165.517" ver="2"/>
				<designed target="Height" value="20" ver="2"/>
				<designed target="Text" value="Время генерации:" ver="2"/>
				<designed target="Font" value="Sans Serif,9,-1,5,50,0,0,0,0,0" ver="2"/>
				<designed target="FontColor" value="4278190080" ver="2"/>
				<designed target="TextAlignment" value="129" ver="2"/>
			</object>
			<object access-modifier="private" name="TextEdit_1" display-name="TextEdit_1" uuid="ef1db43e-7747-41bd-979f-d06b5b9e53f6" base-type="TextEdit" base-type-id="53a97863-93f3-45a1-a2ea-9ff98d2dcdd9" ver="2">
				<designed target="X" value="177" ver="2"/>
				<designed target="Y" value="5" ver="2"/>
				<designed target="Rotation" value="0" ver="2"/>
				<designed target="Scale" value="1" ver="2"/>
				<designed target="Visible" value="true" ver="2"/>
				<designed target="Enabled" value="true" ver="2"/>
				<designed target="Tooltip" value="" ver="2"/>
				<designed target="Width" value="254" ver="2"/>
				<designed target="Height" value="25" ver="2"/>
				<designed target="Text" value="" ver="2"/>
				<designed target="Font" value="Sans Serif,8,-1,5,50,0,0,0,0,0" ver="2"/>
				<designed target="FontColor" value="4278190080" ver="2"/>
				<designed target="TextAlignment" value="129" ver="2"/>
				<designed target="HideInput" value="false" ver="2"/>
				<designed target="PlaceholderText" value="" ver="2"/>
				<designed target="ReadOnly" value="false" ver="2"/>
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="2" event="EditFinished">
					<body kind="javascript">
						<![CDATA[TimeGen.RecBorder_Alarm.Visible = false;
/*var str = TimeGen.TextEdit_1.Text;
//Инициализируем шаблоны
//последовательная запись аргументов
var mask1 = /(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})?\s*(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})?/g;
//повторение знаков
var mask2 = /[>]{2}|[<]{2}|[=]{2}|(><)|(<>)/g;
//наличие букв латинского алфавита
var mask3 = /\D[A-Za-z]/g;
//проверка на соответствие записи типа аргумент-операнд-аргумент
//var mask4 =/[><=]*(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})*[()]*\s*(\&\s*(НЕ)?[!]?|И\s*(НЕ)?[!]?|(ИЛИ)\s*(НЕ)?[!]?|\|\s*(НЕ)?[!]?|\s*(НЕ)?\s*[!]?){1}\s*[()]*[><=]?(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})?/g;
var mask4 =/[!><=]*((0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})*)*[()]*\s*(\&\s*(НЕ)?[!]?|И\s*(НЕ)?[!]?|ИЛИ\s*(НЕ)?[!]?|\|\s*(НЕ)?[!]?|\s*(НЕ)?\s*[!]?){1}\s*[()]*[!><=]+((0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})*)+/g;
//наличие кириллицы
var mask5 = /[А-Яа-я]/g;
var count = 0;
//общий паттерн
var elementPattern = /([(]|[)]|(НЕ)|(ИЛИ)|(И)|[!]|[&]|[|]|[<>=])/igu;
var errorArray = [];
var commonArray = [];

commonArray = str.match(elementPattern);
//опеределяем количество скобок
if (commonArray != null) 
{
	for (let i = 0; i < commonArray.length; i++)
	{
		if (commonArray[i] == "(") count++;
		if (commonArray[i] == ")") count--;
	}
}
//тестируем строку по каждому шаблону
errorArray.push(mask1.test(str));
errorArray.push(mask2.test(str));
errorArray.push(mask3.test(str));
//в этих случаях несовпадение с шаблоном = неправильная запись
str = str.replace(mask4,"");
errorArray.push(mask5.test(str));
//удаляем правильные совпадения
str = str.replace(/[!]*[><=]+(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})?/g,"");
str = str.replace(/[(]/g,"");
str = str.replace(/[)]/g,"");
//если в строке что-то осталось или массив ошибок содержит ошибки, то подсвечиваем рамку
if ((str.length > 0 && str != "")|| errorArray[0] || errorArray[1] || errorArray[2] || errorArray[3] || count != 0) 
{
	TimeGen.RecBorder_Alarm.Visible = true;
	Journal.Text_1.Text = "Условия фильтрации содержат ошибки";
}
bErrorFlag  = TimeGen.RecBorder_Alarm.Visible;*/]]>
					</body>
				</do-on>
			</object>
			<object access-modifier="private" name="RecBorder_Alarm" display-name="RecBorder_Alarm" uuid="5c7ca0ea-4805-4a22-aef9-781993d73ab5" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="2">
				<designed target="X" value="177" ver="2"/>
				<designed target="Y" value="5" ver="2"/>
				<designed target="Rotation" value="0" ver="2"/>
				<designed target="Scale" value="1" ver="2"/>
				<designed target="Visible" value="false" ver="2"/>
				<designed target="Enabled" value="true" ver="2"/>
				<designed target="Tooltip" value="" ver="2"/>
				<designed target="Width" value="253" ver="2"/>
				<designed target="Height" value="20" ver="2"/>
				<designed target="RoundingRadius" value="0" ver="2"/>
				<designed target="PenColor" value="0xffff0000" ver="2"/>
				<designed target="PenStyle" value="1" ver="2"/>
				<designed target="PenWidth" value="2" ver="2"/>
				<designed target="BrushColor" value="4278190080" ver="2"/>
				<designed target="BrushStyle" value="0" ver="2"/>
				<object access-modifier="private" name="Text_Alarm" display-name="Text_Alarm" uuid="a898d78c-d0ff-4a1b-9c7a-9897b1e10d21" base-type="Text" base-type-id="21d59f8d-2ca4-4592-92ca-b4dc48992a0f" ver="2">
					<designed target="X" value="-6.82143" ver="2"/>
					<designed target="Y" value="1.84524" ver="2"/>
					<designed target="Rotation" value="0" ver="2"/>
					<designed target="Scale" value="1" ver="2"/>
					<designed target="Visible" value="true" ver="2"/>
					<designed target="Enabled" value="true" ver="2"/>
					<designed target="Tooltip" value="" ver="2"/>
					<designed target="Width" value="6.16667" ver="2"/>
					<designed target="Height" value="16.5" ver="2"/>
					<designed target="Text" value="!" ver="2"/>
					<designed target="Font" value="MS Shell Dlg 2,10,-1,5,75,0,0,0,0,0,Полужирный" ver="2"/>
					<designed target="FontColor" value="0xffff0000" ver="2"/>
					<designed target="TextAlignment" value="33" ver="2"/>
				</object>
			</object>
		</object>
		<object access-modifier="private" name="TimeRun" display-name="TimeRun" uuid="25c13736-c745-40c2-ad0f-61c60c54ca57" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="2">
			<designed target="X" value="13" ver="2"/>
			<designed target="Y" value="39" ver="2"/>
			<designed target="Rotation" value="0" ver="2"/>
			<designed target="Scale" value="1" ver="2"/>
			<designed target="Visible" value="true" ver="2"/>
			<designed target="Enabled" value="true" ver="2"/>
			<designed target="Tooltip" value="" ver="2"/>
			<designed target="Width" value="178.333" ver="2"/>
			<designed target="Height" value="30" ver="2"/>
			<designed target="RoundingRadius" value="0" ver="2"/>
			<designed target="PenColor" value="4278190080" ver="2"/>
			<designed target="PenStyle" value="0" ver="2"/>
			<designed target="PenWidth" value="0" ver="2"/>
			<designed target="BrushColor" value="4278190080" ver="2"/>
			<designed target="BrushStyle" value="0" ver="2"/>
			<object access-modifier="private" name="Text_1" display-name="Text_1" uuid="6a83d3b6-5423-47f1-9f45-b9ef783c6b0e" base-type="Text" base-type-id="21d59f8d-2ca4-4592-92ca-b4dc48992a0f" ver="2">
				<designed target="X" value="-2.86633" ver="2"/>
				<designed target="Y" value="5" ver="2"/>
				<designed target="Rotation" value="0" ver="2"/>
				<designed target="Scale" value="1" ver="2"/>
				<designed target="Visible" value="true" ver="2"/>
				<designed target="Enabled" value="true" ver="2"/>
				<designed target="Tooltip" value="" ver="2"/>
				<designed target="Width" value="165.517" ver="2"/>
				<designed target="Height" value="20" ver="2"/>
				<designed target="Text" value="Время срабатывания:" ver="2"/>
				<designed target="Font" value="Sans Serif,9,-1,5,50,0,0,0,0,0" ver="2"/>
				<designed target="FontColor" value="4278190080" ver="2"/>
				<designed target="TextAlignment" value="129" ver="2"/>
			</object>
			<object access-modifier="private" name="TextEdit_1" display-name="TextEdit_1" uuid="4b3272c9-b8e8-4cfa-9490-69a02d3c8a09" base-type="TextEdit" base-type-id="53a97863-93f3-45a1-a2ea-9ff98d2dcdd9" ver="2">
				<designed target="X" value="177" ver="2"/>
				<designed target="Y" value="5" ver="2"/>
				<designed target="Rotation" value="0" ver="2"/>
				<designed target="Scale" value="1" ver="2"/>
				<designed target="Visible" value="true" ver="2"/>
				<designed target="Enabled" value="true" ver="2"/>
				<designed target="Tooltip" value="" ver="2"/>
				<designed target="Width" value="254" ver="2"/>
				<designed target="Height" value="25" ver="2"/>
				<designed target="Text" value="" ver="2"/>
				<designed target="Font" value="Sans Serif,8,-1,5,50,0,0,0,0,0" ver="2"/>
				<designed target="FontColor" value="4278190080" ver="2"/>
				<designed target="TextAlignment" value="129" ver="2"/>
				<designed target="HideInput" value="false" ver="2"/>
				<designed target="PlaceholderText" value="" ver="2"/>
				<designed target="ReadOnly" value="false" ver="2"/>
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="2" event="EditFinished">
					<body kind="javascript">
						<![CDATA[TimeRun.RecBorder_Alarm.Visible = false;
/*var str = TimeRun.TextEdit_1.Text;
//Инициализируем шаблоны
//последовательная запись аргументов
var mask1 = /(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})?\s*(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})?/g;
//повторение знаков
var mask2 = /[>]{2}|[<]{2}|[=]{2}|(><)|(<>)/g;
//наличие букв латинского алфавита
var mask3 = /\D[A-Za-z]/g;
//проверка на соответствие записи типа аргумент-операнд-аргумент
//var mask4 =/[><=]*(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})*[()]*\s*(\&\s*(НЕ)?[!]?|И\s*(НЕ)?[!]?|(ИЛИ)\s*(НЕ)?[!]?|\|\s*(НЕ)?[!]?|\s*(НЕ)?\s*[!]?){1}\s*[()]*[><=]?(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})?/g;
var mask4 =/[!><=]*((0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})*)*[()]*\s*(\&\s*(НЕ)?[!]?|И\s*(НЕ)?[!]?|ИЛИ\s*(НЕ)?[!]?|\|\s*(НЕ)?[!]?|\s*(НЕ)?\s*[!]?){1}\s*[()]*[!><=]+((0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})*)+/g;
//наличие кириллицы
var mask5 = /[А-Яа-я]/g;
var count = 0;
//общий паттерн
var elementPattern = /([(]|[)]|(НЕ)|(ИЛИ)|(И)|[!]|[&]|[|]|[<>=])/igu;
var errorArray = [];
var commonArray = [];

commonArray = str.match(elementPattern);
//опеределяем количество скобок
if (commonArray != null) 
{
	for (let i = 0; i < commonArray.length; i++)
	{
		if (commonArray[i] == "(") count++;
		if (commonArray[i] == ")") count--;
	}
}
//тестируем строку по каждому шаблону
errorArray.push(mask1.test(str));
errorArray.push(mask2.test(str));
errorArray.push(mask3.test(str));
//в этих случаях несовпадение с шаблоном = неправильная запись
str = str.replace(mask4,"");
errorArray.push(mask5.test(str));
//удаляем правильные совпадения
str = str.replace(/[!]*[><=]+(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})?/g,"");
str = str.replace(/[(]/g,"");
str = str.replace(/[)]/g,"");
//если в строке что-то осталось или массив ошибок содержит ошибки, то подсвечиваем рамку
if ((str.length > 0 && str != "")|| errorArray[0] || errorArray[1] || errorArray[2] || errorArray[3] || count != 0) 
{
	TimeRun.RecBorder_Alarm.Visible = true;
	Journal.Text_1.Text = "Условия фильтрации содержат ошибки";
}
bErrorFlag = TimeRun.RecBorder_Alarm.Visible;*/]]>
					</body>
				</do-on>
			</object>
			<object access-modifier="private" name="RecBorder_Alarm" display-name="RecBorder_Alarm" uuid="2dbb869f-4f17-40e8-88e4-66f3bd865cac" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="2">
				<designed target="X" value="177.334" ver="2"/>
				<designed target="Y" value="5" ver="2"/>
				<designed target="Rotation" value="0" ver="2"/>
				<designed target="Scale" value="1" ver="2"/>
				<designed target="Visible" value="false" ver="2"/>
				<designed target="Enabled" value="true" ver="2"/>
				<designed target="Tooltip" value="" ver="2"/>
				<designed target="Width" value="253" ver="2"/>
				<designed target="Height" value="20" ver="2"/>
				<designed target="RoundingRadius" value="0" ver="2"/>
				<designed target="PenColor" value="0xffff0000" ver="2"/>
				<designed target="PenStyle" value="1" ver="2"/>
				<designed target="PenWidth" value="2" ver="2"/>
				<designed target="BrushColor" value="4278190080" ver="2"/>
				<designed target="BrushStyle" value="0" ver="2"/>
				<object access-modifier="private" name="Text_Alarm" display-name="Text_Alarm" uuid="ce14ae0a-bca1-4556-aeeb-8adc69fd0027" base-type="Text" base-type-id="21d59f8d-2ca4-4592-92ca-b4dc48992a0f" ver="2">
					<designed target="X" value="-6.82143" ver="2"/>
					<designed target="Y" value="1.84524" ver="2"/>
					<designed target="Rotation" value="0" ver="2"/>
					<designed target="Scale" value="1" ver="2"/>
					<designed target="Visible" value="true" ver="2"/>
					<designed target="Enabled" value="true" ver="2"/>
					<designed target="Tooltip" value="" ver="2"/>
					<designed target="Width" value="6.16667" ver="2"/>
					<designed target="Height" value="16.5" ver="2"/>
					<designed target="Text" value="!" ver="2"/>
					<designed target="Font" value="MS Shell Dlg 2,10,-1,5,75,0,0,0,0,0,Полужирный" ver="2"/>
					<designed target="FontColor" value="0xffff0000" ver="2"/>
					<designed target="TextAlignment" value="33" ver="2"/>
				</object>
			</object>
		</object>
		<object access-modifier="private" name="TimeDeactiv" display-name="TimeDeactiv" uuid="8125af60-0921-41ce-a3be-90770209d2b6" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="2">
			<designed target="X" value="13" ver="2"/>
			<designed target="Y" value="69" ver="2"/>
			<designed target="Rotation" value="0" ver="2"/>
			<designed target="Scale" value="1" ver="2"/>
			<designed target="Visible" value="true" ver="2"/>
			<designed target="Enabled" value="true" ver="2"/>
			<designed target="Tooltip" value="" ver="2"/>
			<designed target="Width" value="178.333" ver="2"/>
			<designed target="Height" value="30" ver="2"/>
			<designed target="RoundingRadius" value="0" ver="2"/>
			<designed target="PenColor" value="4278190080" ver="2"/>
			<designed target="PenStyle" value="0" ver="2"/>
			<designed target="PenWidth" value="0" ver="2"/>
			<designed target="BrushColor" value="4278190080" ver="2"/>
			<designed target="BrushStyle" value="0" ver="2"/>
			<object access-modifier="private" name="Text_1" display-name="Text_1" uuid="58f24cf8-3311-4cbe-97b5-e9836346a431" base-type="Text" base-type-id="21d59f8d-2ca4-4592-92ca-b4dc48992a0f" ver="2">
				<designed target="X" value="-2.86633" ver="2"/>
				<designed target="Y" value="4" ver="2"/>
				<designed target="Rotation" value="0" ver="2"/>
				<designed target="Scale" value="1" ver="2"/>
				<designed target="Visible" value="true" ver="2"/>
				<designed target="Enabled" value="true" ver="2"/>
				<designed target="Tooltip" value="" ver="2"/>
				<designed target="Width" value="165.517" ver="2"/>
				<designed target="Height" value="20" ver="2"/>
				<designed target="Text" value="Время деактивации:" ver="2"/>
				<designed target="Font" value="Sans Serif,9,-1,5,50,0,0,0,0,0" ver="2"/>
				<designed target="FontColor" value="4278190080" ver="2"/>
				<designed target="TextAlignment" value="129" ver="2"/>
			</object>
			<object access-modifier="private" name="TextEdit_1" display-name="TextEdit_1" uuid="4890f5ef-9df2-4c79-aa3d-463f7d9dbbeb" base-type="TextEdit" base-type-id="53a97863-93f3-45a1-a2ea-9ff98d2dcdd9" ver="2">
				<designed target="X" value="177" ver="2"/>
				<designed target="Y" value="5" ver="2"/>
				<designed target="Rotation" value="0" ver="2"/>
				<designed target="Scale" value="1" ver="2"/>
				<designed target="Visible" value="true" ver="2"/>
				<designed target="Enabled" value="true" ver="2"/>
				<designed target="Tooltip" value="" ver="2"/>
				<designed target="Width" value="254" ver="2"/>
				<designed target="Height" value="25" ver="2"/>
				<designed target="Text" value="" ver="2"/>
				<designed target="Font" value="Sans Serif,8,-1,5,50,0,0,0,0,0" ver="2"/>
				<designed target="FontColor" value="4278190080" ver="2"/>
				<designed target="TextAlignment" value="129" ver="2"/>
				<designed target="HideInput" value="false" ver="2"/>
				<designed target="PlaceholderText" value="" ver="2"/>
				<designed target="ReadOnly" value="false" ver="2"/>
				<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="2" event="EditFinished">
					<body kind="javascript">
						<![CDATA[TimeDeactiv.RecBorder_Alarm.Visible = false;
/*var str = TimeDeactiv.TextEdit_1.Text;
//Инициализируем шаблоны
//последовательная запись аргументов
var mask1 = /(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})?\s*(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})?/g;
//повторение знаков
var mask2 = /[>]{2}|[<]{2}|[=]{2}|(><)|(<>)/g;
//наличие букв латинского алфавита
var mask3 = /\D[A-Za-z]/g;
//проверка на соответствие записи типа аргумент-операнд-аргумент
//var mask4 =/[><=]*(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})*[()]*\s*(\&\s*(НЕ)?[!]?|И\s*(НЕ)?[!]?|(ИЛИ)\s*(НЕ)?[!]?|\|\s*(НЕ)?[!]?|\s*(НЕ)?\s*[!]?){1}\s*[()]*[><=]?(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})?/g;
var mask4 =/[!><=]*((0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})*)*[()]*\s*(\&\s*(НЕ)?[!]?|И\s*(НЕ)?[!]?|ИЛИ\s*(НЕ)?[!]?|\|\s*(НЕ)?[!]?|\s*(НЕ)?\s*[!]?){1}\s*[()]*[!><=]+((0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})*)+/g;
//наличие кириллицы
var mask5 = /[А-Яа-я]/g;
var count = 0;
//общий паттерн
var elementPattern = /([(]|[)]|(НЕ)|(ИЛИ)|(И)|[!]|[&]|[|]|[<>=])/igu;
var errorArray = [];
var commonArray = [];

commonArray = str.match(elementPattern);
//опеределяем количество скобок
if (commonArray != null) 
{
	for (let i = 0; i < commonArray.length; i++)
	{
		if (commonArray[i] == "(") count++;
		if (commonArray[i] == ")") count--;
	}
}
//тестируем строку по каждому шаблону
errorArray.push(mask1.test(str));
errorArray.push(mask2.test(str));
errorArray.push(mask3.test(str));
//в этих случаях несовпадение с шаблоном = неправильная запись
str = str.replace(mask4,"");
errorArray.push(mask5.test(str));
//удаляем правильные совпадения
str = str.replace(/[!]*[><=]+(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})?/g,"");
str = str.replace(/[(]/g,"");
str = str.replace(/[)]/g,"");
//если в строке что-то осталось или массив ошибок содержит ошибки, то подсвечиваем рамку
if ((str.length > 0 && str != "")|| errorArray[0] || errorArray[1] || errorArray[2] || errorArray[3] || count != 0) 
{
	TimeDeactiv.RecBorder_Alarm.Visible = true;
	Journal.Text_1.Text = "Условия фильтрации содержат ошибки";
}
bErrorFlag = TimeDeactiv.RecBorder_Alarm.Visible;*/]]>
					</body>
				</do-on>
			</object>
			<object access-modifier="private" name="RecBorder_Alarm" display-name="RecBorder_Alarm" uuid="bccdd197-d777-45e4-92ca-38aabe4e7b6d" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="2">
				<designed target="X" value="177" ver="2"/>
				<designed target="Y" value="5" ver="2"/>
				<designed target="Rotation" value="0" ver="2"/>
				<designed target="Scale" value="1" ver="2"/>
				<designed target="Visible" value="false" ver="2"/>
				<designed target="Enabled" value="true" ver="2"/>
				<designed target="Tooltip" value="" ver="2"/>
				<designed target="Width" value="253" ver="2"/>
				<designed target="Height" value="20" ver="2"/>
				<designed target="RoundingRadius" value="0" ver="2"/>
				<designed target="PenColor" value="0xffff0000" ver="2"/>
				<designed target="PenStyle" value="1" ver="2"/>
				<designed target="PenWidth" value="2" ver="2"/>
				<designed target="BrushColor" value="4278190080" ver="2"/>
				<designed target="BrushStyle" value="0" ver="2"/>
				<object access-modifier="private" name="Text_Alarm" display-name="Text_Alarm" uuid="d9dc91a9-9cfd-4b7f-b23f-44027f6ca80e" base-type="Text" base-type-id="21d59f8d-2ca4-4592-92ca-b4dc48992a0f" ver="2">
					<designed target="X" value="-6.82143" ver="2"/>
					<designed target="Y" value="1.84524" ver="2"/>
					<designed target="Rotation" value="0" ver="2"/>
					<designed target="Scale" value="1" ver="2"/>
					<designed target="Visible" value="true" ver="2"/>
					<designed target="Enabled" value="true" ver="2"/>
					<designed target="Tooltip" value="" ver="2"/>
					<designed target="Width" value="6.16667" ver="2"/>
					<designed target="Height" value="16.5" ver="2"/>
					<designed target="Text" value="!" ver="2"/>
					<designed target="Font" value="MS Shell Dlg 2,10,-1,5,75,0,0,0,0,0,Полужирный" ver="2"/>
					<designed target="FontColor" value="0xffff0000" ver="2"/>
					<designed target="TextAlignment" value="33" ver="2"/>
				</object>
			</object>
		</object>
		<object access-modifier="private" name="Name" display-name="Name" uuid="6417351e-e26d-4fad-b88f-b72960ccea1e" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="2">
			<designed target="X" value="6.45693" ver="2"/>
			<designed target="Y" value="-9.63335" ver="2"/>
			<designed target="Rotation" value="0" ver="2"/>
			<designed target="Scale" value="1" ver="2"/>
			<designed target="Visible" value="true" ver="2"/>
			<designed target="Enabled" value="true" ver="2"/>
			<designed target="Tooltip" value="" ver="2"/>
			<designed target="Width" value="135" ver="2"/>
			<designed target="Height" value="19.6667" ver="2"/>
			<designed target="RoundingRadius" value="0" ver="2"/>
			<designed target="PenColor" value="4278190080" ver="2"/>
			<designed target="PenStyle" value="0" ver="2"/>
			<designed target="PenWidth" value="1" ver="2"/>
			<designed target="BrushColor" value="0xfff0f0f0" ver="2"/>
			<designed target="BrushStyle" value="1" ver="2"/>
			<object access-modifier="private" name="Text_1" display-name="Text_1" uuid="57260b5e-8b3c-4383-bbc5-532b85afc997" base-type="Text" base-type-id="21d59f8d-2ca4-4592-92ca-b4dc48992a0f" ver="2">
				<designed target="X" value="3" ver="2"/>
				<designed target="Y" value="0" ver="2"/>
				<designed target="Rotation" value="0" ver="2"/>
				<designed target="Scale" value="1" ver="2"/>
				<designed target="Visible" value="true" ver="2"/>
				<designed target="Enabled" value="true" ver="2"/>
				<designed target="Tooltip" value="" ver="2"/>
				<designed target="Width" value="133.2" ver="2"/>
				<designed target="Height" value="20" ver="2"/>
				<designed target="Text" value="Условия фильтрации" ver="2"/>
				<designed target="Font" value="Sans Serif,9,-1,5,50,0,0,0,0,0" ver="2"/>
				<designed target="FontColor" value="0xff000000" ver="2"/>
				<designed target="TextAlignment" value="129" ver="2"/>
			</object>
		</object>
		<object access-modifier="private" name="AcknowledgeCondition" display-name="AcknowledgeCondition" uuid="5b7bdfae-111b-4724-b6ed-5fbfcf69e35c" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="3">
			<designed target="X" value="3.33333" ver="3"/>
			<designed target="Y" value="201.667" ver="3"/>
			<designed target="Rotation" value="0" ver="3"/>
			<designed target="Scale" value="1" ver="3"/>
			<designed target="Visible" value="true" ver="3"/>
			<designed target="Enabled" value="true" ver="3"/>
			<designed target="Tooltip" value="" ver="3"/>
			<designed target="Width" value="444.333" ver="3"/>
			<designed target="Height" value="131" ver="3"/>
			<designed target="RoundingRadius" value="0" ver="3"/>
			<designed target="PenColor" value="0xffb3b3b3" ver="3"/>
			<designed target="PenStyle" value="1" ver="3"/>
			<designed target="PenWidth" value="1" ver="3"/>
			<designed target="BrushColor" value="4278190080" ver="3"/>
			<designed target="BrushStyle" value="0" ver="3"/>
			<object access-modifier="private" name="User" display-name="User" uuid="88be4994-840e-4eab-94d3-10c88f91d8a3" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="2">
				<designed target="X" value="10.0003" ver="2"/>
				<designed target="Y" value="67.3333" ver="2"/>
				<designed target="Rotation" value="0" ver="2"/>
				<designed target="Scale" value="1" ver="2"/>
				<designed target="Visible" value="true" ver="2"/>
				<designed target="Enabled" value="true" ver="2"/>
				<designed target="Tooltip" value="" ver="2"/>
				<designed target="Width" value="177.666" ver="2"/>
				<designed target="Height" value="30" ver="2"/>
				<designed target="RoundingRadius" value="0" ver="2"/>
				<designed target="PenColor" value="4278190080" ver="2"/>
				<designed target="PenStyle" value="0" ver="2"/>
				<designed target="PenWidth" value="0" ver="2"/>
				<designed target="BrushColor" value="4278190080" ver="2"/>
				<designed target="BrushStyle" value="0" ver="2"/>
				<object access-modifier="private" name="Text_1" display-name="Text_1" uuid="585617e8-1c3d-4040-a351-4942b780f809" base-type="Text" base-type-id="21d59f8d-2ca4-4592-92ca-b4dc48992a0f" ver="2">
					<designed target="X" value="-3.2" ver="2"/>
					<designed target="Y" value="2" ver="2"/>
					<designed target="Rotation" value="0" ver="2"/>
					<designed target="Scale" value="1" ver="2"/>
					<designed target="Visible" value="true" ver="2"/>
					<designed target="Enabled" value="true" ver="2"/>
					<designed target="Tooltip" value="" ver="2"/>
					<designed target="Width" value="165.517" ver="2"/>
					<designed target="Height" value="20" ver="2"/>
					<designed target="Text" value="Пользователь:" ver="2"/>
					<designed target="Font" value="Sans Serif,9,-1,5,50,0,0,0,0,0" ver="2"/>
					<designed target="FontColor" value="4278190080" ver="2"/>
					<designed target="TextAlignment" value="129" ver="2"/>
				</object>
				<object access-modifier="private" name="TextEdit_1" display-name="TextEdit_1" uuid="dc5ff459-3644-443a-b198-22ebfa325ada" base-type="TextEdit" base-type-id="53a97863-93f3-45a1-a2ea-9ff98d2dcdd9" ver="2">
					<designed target="X" value="177" ver="2"/>
					<designed target="Y" value="5" ver="2"/>
					<designed target="Rotation" value="0" ver="2"/>
					<designed target="Scale" value="1" ver="2"/>
					<designed target="Visible" value="true" ver="2"/>
					<designed target="Enabled" value="true" ver="2"/>
					<designed target="Tooltip" value="" ver="2"/>
					<designed target="Width" value="254" ver="2"/>
					<designed target="Height" value="25" ver="2"/>
					<designed target="Text" value="" ver="2"/>
					<designed target="Font" value="Sans Serif,8,-1,5,50,0,0,0,0,0" ver="2"/>
					<designed target="FontColor" value="0xff000000" ver="2"/>
					<designed target="TextAlignment" value="129" ver="2"/>
					<designed target="HideInput" value="false" ver="2"/>
					<designed target="PlaceholderText" value="" ver="2"/>
					<designed target="ReadOnly" value="false" ver="2"/>
					<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="2" event="EditFinished">
						<body kind="javascript">
							<![CDATA[User.RecBorder_Alarm.Visible = false;
/*var str = User.TextEdit_1.Text;
//Инициализируем шаблоны
//повторение знаков
var mask1 = /[!]{2}|[=]{2}/g;
var count = 0;

//паттерн элемента
var elementPattern = /[(]|[)]|(НЕ)|(ИЛИ)|(И)|[!]|[&]|[|]|(\s*[А-Яа-я0-9A-Za-z ?!=;,._-]*[^&()|]\s*)/g;
//паттер оператора
var operatorPattern = /([&])|([ИЛИ]+)|([|])|(И)/g;
var errorArray = [];
var commonArray = [];

commonArray = str.match(elementPattern);
//опеределяем количество скобок
if (commonArray != null) 
{
	for (let i = 0; i < commonArray.length; i++)
	{
		if (commonArray[i] == "(") count++;
		if (commonArray[i] == ")") count--;
	}
}
//тестируем строку по каждому шаблону
errorArray.push(mask1.test(str));
//если в строке что-то осталось или массив ошибок содержит ошибки, то подсвечиваем рамку
if (errorArray[0] || count != 0) 
{
	User.RecBorder_Alarm.Visible = true;
	Journal.Text_1.Text = "Условия фильтрации содержат ошибки";
}
bErrorFlag = User.RecBorder_Alarm.Visible;*/]]>
						</body>
					</do-on>
				</object>
				<object access-modifier="private" name="RecBorder_Alarm" display-name="RecBorder_Alarm" uuid="7413246c-b75c-4c55-af76-59fee1436ef7" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="2">
					<designed target="X" value="177" ver="2"/>
					<designed target="Y" value="5" ver="2"/>
					<designed target="Rotation" value="0" ver="2"/>
					<designed target="Scale" value="1" ver="2"/>
					<designed target="Visible" value="false" ver="2"/>
					<designed target="Enabled" value="true" ver="2"/>
					<designed target="Tooltip" value="" ver="2"/>
					<designed target="Width" value="253" ver="2"/>
					<designed target="Height" value="20" ver="2"/>
					<designed target="RoundingRadius" value="0" ver="2"/>
					<designed target="PenColor" value="0xffff0000" ver="2"/>
					<designed target="PenStyle" value="1" ver="2"/>
					<designed target="PenWidth" value="2" ver="2"/>
					<designed target="BrushColor" value="4278190080" ver="2"/>
					<designed target="BrushStyle" value="0" ver="2"/>
					<object access-modifier="private" name="Text_Alarm" display-name="Text_Alarm" uuid="c083b1d3-bfe9-48e6-9956-e0217c47e56b" base-type="Text" base-type-id="21d59f8d-2ca4-4592-92ca-b4dc48992a0f" ver="2">
						<designed target="X" value="-6.82143" ver="2"/>
						<designed target="Y" value="1.84524" ver="2"/>
						<designed target="Rotation" value="0" ver="2"/>
						<designed target="Scale" value="1" ver="2"/>
						<designed target="Visible" value="true" ver="2"/>
						<designed target="Enabled" value="true" ver="2"/>
						<designed target="Tooltip" value="" ver="2"/>
						<designed target="Width" value="6.16667" ver="2"/>
						<designed target="Height" value="16.5" ver="2"/>
						<designed target="Text" value="!" ver="2"/>
						<designed target="Font" value="MS Shell Dlg 2,10,-1,5,75,0,0,0,0,0,Полужирный" ver="2"/>
						<designed target="FontColor" value="0xffff0000" ver="2"/>
						<designed target="TextAlignment" value="33" ver="2"/>
					</object>
				</object>
			</object>
			<object access-modifier="private" name="Comment" display-name="Comment" uuid="990b3cc9-8660-434a-9d47-0bb2300ef740" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="2">
				<designed target="X" value="5.00033" ver="2"/>
				<designed target="Y" value="97.0003" ver="2"/>
				<designed target="Rotation" value="0" ver="2"/>
				<designed target="Scale" value="1" ver="2"/>
				<designed target="Visible" value="true" ver="2"/>
				<designed target="Enabled" value="true" ver="2"/>
				<designed target="Tooltip" value="" ver="2"/>
				<designed target="Width" value="177.666" ver="2"/>
				<designed target="Height" value="30" ver="2"/>
				<designed target="RoundingRadius" value="0" ver="2"/>
				<designed target="PenColor" value="4278190080" ver="2"/>
				<designed target="PenStyle" value="0" ver="2"/>
				<designed target="PenWidth" value="0" ver="2"/>
				<designed target="BrushColor" value="4278190080" ver="2"/>
				<designed target="BrushStyle" value="0" ver="2"/>
				<object access-modifier="private" name="Text_1" display-name="Text_1" uuid="78a8fc1f-68d5-48a5-a731-720ea8854204" base-type="Text" base-type-id="21d59f8d-2ca4-4592-92ca-b4dc48992a0f" ver="2">
					<designed target="X" value="1.8" ver="2"/>
					<designed target="Y" value="3.333" ver="2"/>
					<designed target="Rotation" value="0" ver="2"/>
					<designed target="Scale" value="1" ver="2"/>
					<designed target="Visible" value="true" ver="2"/>
					<designed target="Enabled" value="true" ver="2"/>
					<designed target="Tooltip" value="" ver="2"/>
					<designed target="Width" value="180.517" ver="2"/>
					<designed target="Height" value="20" ver="2"/>
					<designed target="Text" value="Комментарий квитирования:" ver="2"/>
					<designed target="Font" value="Sans Serif,9,-1,5,50,0,0,0,0,0" ver="2"/>
					<designed target="FontColor" value="4278190080" ver="2"/>
					<designed target="TextAlignment" value="129" ver="2"/>
				</object>
				<object access-modifier="private" name="TextEdit_1" display-name="TextEdit_1" uuid="e71adf90-8205-4ded-a92c-81425fd13db7" base-type="TextEdit" base-type-id="53a97863-93f3-45a1-a2ea-9ff98d2dcdd9" ver="2">
					<designed target="X" value="182" ver="2"/>
					<designed target="Y" value="4" ver="2"/>
					<designed target="Rotation" value="0" ver="2"/>
					<designed target="Scale" value="1" ver="2"/>
					<designed target="Visible" value="true" ver="2"/>
					<designed target="Enabled" value="true" ver="2"/>
					<designed target="Tooltip" value="" ver="2"/>
					<designed target="Width" value="254" ver="2"/>
					<designed target="Height" value="25" ver="2"/>
					<designed target="Text" value="" ver="2"/>
					<designed target="Font" value="Sans Serif,8,-1,5,50,0,0,0,0,0" ver="2"/>
					<designed target="FontColor" value="0xff000000" ver="2"/>
					<designed target="TextAlignment" value="129" ver="2"/>
					<designed target="HideInput" value="false" ver="2"/>
					<designed target="PlaceholderText" value="" ver="2"/>
					<designed target="ReadOnly" value="false" ver="2"/>
					<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="2" event="EditFinished">
						<body kind="javascript">
							<![CDATA[Comment.RecBorder_Alarm.Visible = false;
/*var str = Comment.TextEdit_1.Text;
//Инициализируем шаблоны
//повторение знаков
var mask1 = /[!]{2}|[=]{2}/g;
var count = 0;

//паттерн элемента
var elementPattern = /[(]|[)]|(НЕ)|(ИЛИ)|(И)|[!]|[&]|[|]|(\s*[А-Яа-я0-9A-Za-z ?!=;,._-]*[^&()|]\s*)/g;
//паттер оператора
var operatorPattern = /([&])|([ИЛИ]+)|([|])|(И)/g;
var errorArray = [];
var commonArray = [];

commonArray = str.match(elementPattern);
//опеределяем количество скобок
if (commonArray != null) 
{
	for (let i = 0; i < commonArray.length; i++)
	{
		if (commonArray[i] == "(") count++;
		if (commonArray[i] == ")") count--;
	}
}
//тестируем строку по каждому шаблону
errorArray.push(mask1.test(str));
//если в строке что-то осталось или массив ошибок содержит ошибки, то подсвечиваем рамку
if (errorArray[0] || count != 0) 
{
	Comment.RecBorder_Alarm.Visible = true;
	Journal.Text_1.Text = "Условия фильтрации содержат ошибки";
}
bErrorFlag = Comment.RecBorder_Alarm.Visible;
*/]]>
						</body>
					</do-on>
				</object>
				<object access-modifier="private" name="RecBorder_Alarm" display-name="RecBorder_Alarm" uuid="e11526ae-a0af-44fd-893d-223c6026d28b" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="2">
					<designed target="X" value="182" ver="2"/>
					<designed target="Y" value="4" ver="2"/>
					<designed target="Rotation" value="0" ver="2"/>
					<designed target="Scale" value="1" ver="2"/>
					<designed target="Visible" value="false" ver="2"/>
					<designed target="Enabled" value="true" ver="2"/>
					<designed target="Tooltip" value="" ver="2"/>
					<designed target="Width" value="253" ver="2"/>
					<designed target="Height" value="20" ver="2"/>
					<designed target="RoundingRadius" value="0" ver="2"/>
					<designed target="PenColor" value="0xffff0000" ver="2"/>
					<designed target="PenStyle" value="1" ver="2"/>
					<designed target="PenWidth" value="2" ver="2"/>
					<designed target="BrushColor" value="4278190080" ver="2"/>
					<designed target="BrushStyle" value="0" ver="2"/>
					<object access-modifier="private" name="Text_Alarm" display-name="Text_Alarm" uuid="c064e4fc-87d1-4fdb-a291-c934cad76564" base-type="Text" base-type-id="21d59f8d-2ca4-4592-92ca-b4dc48992a0f" ver="2">
						<designed target="X" value="-6.82143" ver="2"/>
						<designed target="Y" value="1.84524" ver="2"/>
						<designed target="Rotation" value="0" ver="2"/>
						<designed target="Scale" value="1" ver="2"/>
						<designed target="Visible" value="true" ver="2"/>
						<designed target="Enabled" value="true" ver="2"/>
						<designed target="Tooltip" value="" ver="2"/>
						<designed target="Width" value="6.16667" ver="2"/>
						<designed target="Height" value="16.5" ver="2"/>
						<designed target="Text" value="!" ver="2"/>
						<designed target="Font" value="MS Shell Dlg 2,10,-1,5,75,0,0,0,0,0,Полужирный" ver="2"/>
						<designed target="FontColor" value="0xffff0000" ver="2"/>
						<designed target="TextAlignment" value="33" ver="2"/>
					</object>
				</object>
			</object>
			<object access-modifier="private" name="TimeAcknow" display-name="TimeAcknow" uuid="6c333a2a-27d6-4687-b53a-e1e506fc24b6" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="2">
				<designed target="X" value="8.00033" ver="2"/>
				<designed target="Y" value="39.3333" ver="2"/>
				<designed target="Rotation" value="0" ver="2"/>
				<designed target="Scale" value="1" ver="2"/>
				<designed target="Visible" value="true" ver="2"/>
				<designed target="Enabled" value="true" ver="2"/>
				<designed target="Tooltip" value="" ver="2"/>
				<designed target="Width" value="178.333" ver="2"/>
				<designed target="Height" value="30" ver="2"/>
				<designed target="RoundingRadius" value="0" ver="2"/>
				<designed target="PenColor" value="4278190080" ver="2"/>
				<designed target="PenStyle" value="0" ver="2"/>
				<designed target="PenWidth" value="0" ver="2"/>
				<designed target="BrushColor" value="4278190080" ver="2"/>
				<designed target="BrushStyle" value="0" ver="2"/>
				<object access-modifier="private" name="Text_1" display-name="Text_1" uuid="7bbe5a24-a054-4b8b-abd1-3d03a310204f" base-type="Text" base-type-id="21d59f8d-2ca4-4592-92ca-b4dc48992a0f" ver="2">
					<designed target="X" value="-1.2" ver="2"/>
					<designed target="Y" value="4" ver="2"/>
					<designed target="Rotation" value="0" ver="2"/>
					<designed target="Scale" value="1" ver="2"/>
					<designed target="Visible" value="true" ver="2"/>
					<designed target="Enabled" value="true" ver="2"/>
					<designed target="Tooltip" value="" ver="2"/>
					<designed target="Width" value="165.517" ver="2"/>
					<designed target="Height" value="20" ver="2"/>
					<designed target="Text" value="Время квитирования:" ver="2"/>
					<designed target="Font" value="Sans Serif,9,-1,5,50,0,0,0,0,0" ver="2"/>
					<designed target="FontColor" value="4278190080" ver="2"/>
					<designed target="TextAlignment" value="129" ver="2"/>
				</object>
				<object access-modifier="private" name="TextEdit_1" display-name="TextEdit_1" uuid="af8980c9-5f8f-439a-b66c-3e3d62e84318" base-type="TextEdit" base-type-id="53a97863-93f3-45a1-a2ea-9ff98d2dcdd9" ver="2">
					<designed target="X" value="179" ver="2"/>
					<designed target="Y" value="5" ver="2"/>
					<designed target="Rotation" value="0" ver="2"/>
					<designed target="Scale" value="1" ver="2"/>
					<designed target="Visible" value="true" ver="2"/>
					<designed target="Enabled" value="true" ver="2"/>
					<designed target="Tooltip" value="" ver="2"/>
					<designed target="Width" value="254" ver="2"/>
					<designed target="Height" value="25" ver="2"/>
					<designed target="Text" value="" ver="2"/>
					<designed target="Font" value="Sans Serif,8,-1,5,50,0,0,0,0,0" ver="2"/>
					<designed target="FontColor" value="4278190080" ver="2"/>
					<designed target="TextAlignment" value="129" ver="2"/>
					<designed target="HideInput" value="false" ver="2"/>
					<designed target="PlaceholderText" value="" ver="2"/>
					<designed target="ReadOnly" value="false" ver="2"/>
					<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="2" event="EditFinished">
						<body kind="javascript">
							<![CDATA[TimeAcknow.RecBorder_Alarm.Visible = false;
/*var str = TimeAcknow.TextEdit_1.Text;
//Инициализируем шаблоны
//последовательная запись аргументов
var mask1 = /(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})?\s*(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})?/g;
//повторение знаков
var mask2 = /[>]{2}|[<]{2}|[=]{2}|(><)|(<>)/g;
//наличие букв латинского алфавита
var mask3 = /\D[A-Za-z]/g;
//проверка на соответствие записи типа аргумент-операнд-аргумент
//var mask4 =/[><=]*(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})*[()]*\s*(\&\s*(НЕ)?[!]?|И\s*(НЕ)?[!]?|(ИЛИ)\s*(НЕ)?[!]?|\|\s*(НЕ)?[!]?|\s*(НЕ)?\s*[!]?){1}\s*[()]*[><=]?(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})?/g;
var mask4 =/[!><=]*((0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})*)*[()]*\s*(\&\s*(НЕ)?[!]?|И\s*(НЕ)?[!]?|ИЛИ\s*(НЕ)?[!]?|\|\s*(НЕ)?[!]?|\s*(НЕ)?\s*[!]?){1}\s*[()]*[!><=]+((0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})*)+/g;
//наличие кириллицы
var mask5 = /[А-Яа-я]/g;
var count = 0;
//общий паттерн
var elementPattern = /([(]|[)]|(НЕ)|(ИЛИ)|(И)|[!]|[&]|[|]|[<>=])/igu;
var errorArray = [];
var commonArray = [];

commonArray = str.match(elementPattern);
//опеределяем количество скобок
if (commonArray != null) 
{
	for (let i = 0; i < commonArray.length; i++)
	{
		if (commonArray[i] == "(") count++;
		if (commonArray[i] == ")") count--;
	}
}
//тестируем строку по каждому шаблону
errorArray.push(mask1.test(str));
errorArray.push(mask2.test(str));
errorArray.push(mask3.test(str));
//в этих случаях несовпадение с шаблоном = неправильная запись
str = str.replace(mask4,"");
errorArray.push(mask5.test(str));
//удаляем правильные совпадения
str = str.replace(/[!]*[><=]+(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})?/g,"");
str = str.replace(/[(]/g,"");
str = str.replace(/[)]/g,"");
//если в строке что-то осталось или массив ошибок содержит ошибки, то подсвечиваем рамку
if ((str.length > 0 && str != "")|| errorArray[0] || errorArray[1] || errorArray[2] || errorArray[3] || count != 0) 
{
	TimeAcknow.RecBorder_Alarm.Visible = true;
	Journal.Text_1.Text = "Условия фильтрации содержат ошибки";
}
bErrorFlag = TimeAcknow.RecBorder_Alarm.Visible;*/]]>
						</body>
					</do-on>
				</object>
				<object access-modifier="private" name="RecBorder_Alarm" display-name="RecBorder_Alarm" uuid="8499cb3c-ea8d-435a-8811-73ed02e4c7f8" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="2">
					<designed target="X" value="179" ver="2"/>
					<designed target="Y" value="5" ver="2"/>
					<designed target="Rotation" value="0" ver="2"/>
					<designed target="Scale" value="1" ver="2"/>
					<designed target="Visible" value="false" ver="2"/>
					<designed target="Enabled" value="true" ver="2"/>
					<designed target="Tooltip" value="" ver="2"/>
					<designed target="Width" value="253" ver="2"/>
					<designed target="Height" value="20" ver="2"/>
					<designed target="RoundingRadius" value="0" ver="2"/>
					<designed target="PenColor" value="0xffff0000" ver="2"/>
					<designed target="PenStyle" value="1" ver="2"/>
					<designed target="PenWidth" value="2" ver="2"/>
					<designed target="BrushColor" value="4278190080" ver="2"/>
					<designed target="BrushStyle" value="0" ver="2"/>
					<object access-modifier="private" name="Text_Alarm" display-name="Text_Alarm" uuid="d5294c9b-4ef9-440c-8a3c-e25ea066a2d6" base-type="Text" base-type-id="21d59f8d-2ca4-4592-92ca-b4dc48992a0f" ver="2">
						<designed target="X" value="-6.82143" ver="2"/>
						<designed target="Y" value="1.84524" ver="2"/>
						<designed target="Rotation" value="0" ver="2"/>
						<designed target="Scale" value="1" ver="2"/>
						<designed target="Visible" value="true" ver="2"/>
						<designed target="Enabled" value="true" ver="2"/>
						<designed target="Tooltip" value="" ver="2"/>
						<designed target="Width" value="6.16667" ver="2"/>
						<designed target="Height" value="16.5" ver="2"/>
						<designed target="Text" value="!" ver="2"/>
						<designed target="Font" value="MS Shell Dlg 2,10,-1,5,75,0,0,0,0,0,Полужирный" ver="2"/>
						<designed target="FontColor" value="0xffff0000" ver="2"/>
						<designed target="TextAlignment" value="33" ver="2"/>
					</object>
				</object>
			</object>
			<object access-modifier="private" name="Acknow" display-name="Acknow" uuid="27922986-4831-460f-bb7a-7b6924f7b794" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="2">
				<designed target="X" value="8.00033" ver="2"/>
				<designed target="Y" value="13.0003" ver="2"/>
				<designed target="Rotation" value="0" ver="2"/>
				<designed target="Scale" value="1" ver="2"/>
				<designed target="Visible" value="true" ver="2"/>
				<designed target="Enabled" value="true" ver="2"/>
				<designed target="Tooltip" value="" ver="2"/>
				<designed target="Width" value="176.333" ver="2"/>
				<designed target="Height" value="30" ver="2"/>
				<designed target="RoundingRadius" value="0" ver="2"/>
				<designed target="PenColor" value="4278190080" ver="2"/>
				<designed target="PenStyle" value="0" ver="2"/>
				<designed target="PenWidth" value="0" ver="2"/>
				<designed target="BrushColor" value="4278190080" ver="2"/>
				<designed target="BrushStyle" value="0" ver="2"/>
				<object access-modifier="private" name="Text_1" display-name="Text_1" uuid="5741a983-275e-4382-b93c-5a57cad098b5" base-type="Text" base-type-id="21d59f8d-2ca4-4592-92ca-b4dc48992a0f" ver="2">
					<designed target="X" value="6.8" ver="2"/>
					<designed target="Y" value="-1" ver="2"/>
					<designed target="Rotation" value="0" ver="2"/>
					<designed target="Scale" value="1" ver="2"/>
					<designed target="Visible" value="false" ver="2"/>
					<designed target="Enabled" value="true" ver="2"/>
					<designed target="Tooltip" value="" ver="2"/>
					<designed target="Width" value="165.517" ver="2"/>
					<designed target="Height" value="20" ver="2"/>
					<designed target="Text" value="Квитировано:" ver="2"/>
					<designed target="Font" value="MS Shell Dlg 2,9,-1,5,50,0,0,0,0,0,Обычный" ver="2"/>
					<designed target="FontColor" value="4278190080" ver="2"/>
					<designed target="TextAlignment" value="129" ver="2"/>
				</object>
				<object access-modifier="private" name="ComboBox_1" display-name="ComboBox_1" uuid="6f980931-a5b9-48c2-8618-18b2c35dc83f" base-type="ComboBox" base-type-id="3495bcd2-01f2-4709-b7f4-e9cf6f3a00bc" ver="2">
					<designed target="X" value="179" ver="2"/>
					<designed target="Y" value="0" ver="2"/>
					<designed target="Rotation" value="0" ver="2"/>
					<designed target="Scale" value="1" ver="2"/>
					<designed target="Visible" value="true" ver="2"/>
					<designed target="Enabled" value="true" ver="2"/>
					<designed target="Tooltip" value="" ver="2"/>
					<designed target="Width" value="254" ver="2"/>
					<designed target="Height" value="25" ver="2"/>
					<designed target="Editable" value="false" ver="2"/>
					<designed target="Text" value="" ver="2"/>
					<designed target="SelectedIndex" value="-1" ver="2"/>
					<designed target="Font" value="Sans Serif,8,-1,5,50,0,0,0,0,0" ver="2"/>
					<designed target="FontColor" value="4278190080" ver="2"/>
					<designed target="MaxVisibleItems" value="10" ver="2"/>
				</object>
			</object>
			<object access-modifier="private" name="Name" display-name="Name" uuid="98bd630f-003f-43fb-be97-59edcbc8d140" base-type="Rectangle" base-type-id="15726dc3-881e-4d8d-b0fa-a8f8237f08ca" ver="2">
				<designed target="X" value="8.052" ver="2"/>
				<designed target="Y" value="-10.5" ver="2"/>
				<designed target="Rotation" value="0" ver="2"/>
				<designed target="Scale" value="1" ver="2"/>
				<designed target="Visible" value="true" ver="2"/>
				<designed target="Enabled" value="true" ver="2"/>
				<designed target="Tooltip" value="" ver="2"/>
				<designed target="Width" value="100" ver="2"/>
				<designed target="Height" value="19.6667" ver="2"/>
				<designed target="RoundingRadius" value="0" ver="2"/>
				<designed target="PenColor" value="4278190080" ver="2"/>
				<designed target="PenStyle" value="0" ver="2"/>
				<designed target="PenWidth" value="1" ver="2"/>
				<designed target="BrushColor" value="0xfff0f0f0" ver="2"/>
				<designed target="BrushStyle" value="1" ver="2"/>
				<object access-modifier="private" name="Text_1" display-name="Text_1" uuid="683e8ac2-ffb6-4eb6-a62b-43bc38b82e7f" base-type="Text" base-type-id="21d59f8d-2ca4-4592-92ca-b4dc48992a0f" ver="2">
					<designed target="X" value="6" ver="2"/>
					<designed target="Y" value="0" ver="2"/>
					<designed target="Rotation" value="0" ver="2"/>
					<designed target="Scale" value="1" ver="2"/>
					<designed target="Visible" value="true" ver="2"/>
					<designed target="Enabled" value="true" ver="2"/>
					<designed target="Tooltip" value="" ver="2"/>
					<designed target="Width" value="100" ver="2"/>
					<designed target="Height" value="20" ver="2"/>
					<designed target="Text" value="Квитирование" ver="2"/>
					<designed target="Font" value="Sans Serif,9,-1,5,50,0,0,0,0,0" ver="2"/>
					<designed target="FontColor" value="0xff000000" ver="2"/>
					<designed target="TextAlignment" value="129" ver="2"/>
				</object>
			</object>
		</object>
	</object>
	<object access-modifier="private" name="Link_Alarms" display-name="Link_Alarms" uuid="8e489bf5-d3b5-4466-8e04-0909fa08093c" base-type="Alarms" base-type-id="e8a9dba0-e07f-4bfe-95f9-b75887e3f21b" base-const="true" base-ref="true" ver="2"/>
	<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="2" event="Opened">
		<body kind="javascript">
			<![CDATA[Conditions.Severity.TextEdit_1.Text = Link_Alarms.Main_panel.private.ViewFilter.severityView;
Conditions.Message.TextEdit_1.Text = Link_Alarms.Main_panel.private.ViewFilter.messageView;
Conditions.Source.TextEdit_1.Text = Link_Alarms.Main_panel.private.ViewFilter.sourceView;
Conditions.AcknowledgeCondition.User.TextEdit_1.Text = Link_Alarms.Main_panel.private.ViewFilter.userView;
Conditions.AcknowledgeCondition.Comment.TextEdit_1.Text = Link_Alarms.Main_panel.private.ViewFilter.commentView;
Conditions.TimeGen.TextEdit_1.Text = Link_Alarms.Main_panel.private.ViewFilter.timeGenView;
Conditions.TimeRun.TextEdit_1.Text = Link_Alarms.Main_panel.private.ViewFilter.timeRunView;
Conditions.TimeDeactiv.TextEdit_1.Text = Link_Alarms.Main_panel.private.ViewFilter.timeDeactivView;
Conditions.AcknowledgeCondition.TimeAcknow.TextEdit_1.Text = Link_Alarms.Main_panel.private.ViewFilter.timeAcknowView;
var acknow = Link_Alarms.Main_panel.private.ViewFilter.acknowView;
//Заполняем combobox
if (acknow != "")
{
	Conditions.AcknowledgeCondition.Acknow.ComboBox_1.AddItem("");
	if (acknow == "Квитированные") 
	{
		Conditions.AcknowledgeCondition.Acknow.ComboBox_1.SetItem(0,acknow);
		Conditions.AcknowledgeCondition.Acknow.ComboBox_1.AddItem("Неквитированные");
		Conditions.AcknowledgeCondition.Acknow.ComboBox_1.AddItem("Все");
	}
	else if (acknow == "Неквитированные")
	{ 
		Conditions.AcknowledgeCondition.Acknow.ComboBox_1.SetItem(0,acknow);
		Conditions.AcknowledgeCondition.Acknow.ComboBox_1.AddItem("Квитированные");
		Conditions.AcknowledgeCondition.Acknow.ComboBox_1.AddItem("Все");
	}
	else
	{
		Conditions.AcknowledgeCondition.Acknow.ComboBox_1.SetItem(0,acknow);
		Conditions.AcknowledgeCondition.Acknow.ComboBox_1.AddItem("Неквитированные");
		Conditions.AcknowledgeCondition.Acknow.ComboBox_1.AddItem("Квитированные");
	}
}
else
{
	Conditions.AcknowledgeCondition.Acknow.ComboBox_1.AddItem("Все");
	Conditions.AcknowledgeCondition.Acknow.ComboBox_1.AddItem("Неквитированные");
	Conditions.AcknowledgeCondition.Acknow.ComboBox_1.AddItem("Квитированные");
}

ReadTitle();//Считываем названия заголовков
Focus = true; //Переводим Focus на форму для обработки нажатия клавиш

Window_close_line_1.Rectangle_windowline_base.Text_windowname.Text = WindowCaption;
Window_close_line_1.notifying_WindowWidth_now = WindowWidth;]]>
		</body>
	</do-on>
	<do-on access-modifier="private" name="Handler_2" display-name="Handler_2" ver="3" event="KeyPress">
		<body kind="om">
			<![CDATA[vi: uint4 = event.KeyCode;
if (vi==75) Close();
]]>
		</body>
	</do-on>
	<object access-modifier="private" name="bErrorFlag" display-name="bErrorFlag" uuid="229242da-b086-425e-a579-7d46399c4870" base-type="notifying_bool" base-type-id="f8797810-1baa-4a1f-af36-cf839bf252e8" ver="3">
		<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="3" event="ValueChanged">
			<body kind="javascript">
				<![CDATA[/*var error = (Severity.RecBorder_Alarm.Visible || Message.RecBorder_Alarm.Visible|| Source.RecBorder_Alarm.Visible|| User.RecBorder_Alarm.Visible|| Comment.RecBorder_Alarm.Visible|| TimeGen.RecBorder_Alarm.Visible|| TimeRun.RecBorder_Alarm.Visible|| TimeDeactiv.RecBorder_Alarm.Visible|| TimeAcknow.RecBorder_Alarm.Visible|| Quality.RecBorder_Alarm.Visible || here.Value.RecBorder_Alarm.Visible)
Main_FilterForm.Button_Apply.Enabled = !error;
if (!error) Journal.Text_1 = "";*/




]]>
			</body>
		</do-on>
	</object>
	<do access-modifier="private" name="CheckValueInt" display-name="CheckValueInt" ver="3" type="bool" type-id="7c9fe1ab-1ee2-42d8-939f-94ce3e89fca8" form-by-id="true">
		<param access-modifier="private" name="inputValue" display-name="" uuid="e7478ddd-cb1b-4003-857f-06ea3e5f690a" base-type="string" base-type-id="76403785-f3d5-41a7-9eb6-d19d2aa2d95d" ver="3"/>
		<body kind="javascript">
			<![CDATA[//Функция проверки корректности ввода значений типа int
var str = inputValue;
//Инициализируем шаблоны
//последовательная запись аргументов
var mask1 = /[><=]\d+\s*[><=]\d+/g;
//повторение или неверная запись логических знаков
var mask2 = /[>]{2}|[<]{2}|[=]{3}|[!]{2}|(><)|(<>)|(=>)|(=<)|(НЕ!)|(!НЕ)/g;
//наличие букв латинского алфавита
var mask3 = /\D[A-Za-z]/g;
//проверка на соответствие записи типа аргумент-операнд-аргумент
var mask4 =/[!><=]*\d*[()]*\s*(\&\s*(НЕ)?[!]?|И\s*(НЕ)?[!]?|ИЛИ\s*(НЕ)?[!]?|\|\s*(НЕ)?[!]?|\s*(НЕ)?\s*[!]?){1}\s*[()]*[!><=]+\d+/g;
//наличие кириллицы
var mask5 = /[А-Яа-я]/g;
//число начинается с 0
var mask6 = /[><=][0][0-9]/;
var count = 0;
//общий паттерн
var elementPattern = /([(]|[)]|(НЕ)|(ИЛИ)|(И)|[!]|[&]|[|]|[<>=\d*]+)/igu;
var errorArray = [];
var commonArray = [];

commonArray = str.match(elementPattern);
//опеределяем количество скобок
if (commonArray != null) 
{
	for (let i = 0; i < commonArray.length; i++)
	{
		if (commonArray[i] == "(") count++;
		if (commonArray[i] == ")") count--;
	}
}
//тестируем строку по каждому шаблону
errorArray.push(mask1.test(str));
errorArray.push(mask2.test(str));
errorArray.push(mask3.test(str));
errorArray.push(mask6.test(str));

//в этих случаях несовпадение с шаблоном = неправильная запись
str = str.replace(mask4,"");
errorArray.push(mask5.test(str));
//удаляем правильные совпадения
str = str.replace(/[!]*[><=]+\d+/g,"");
str = str.replace(/[(]/g,"");
str = str.replace(/[)]/g,"");

//если в строке что-то осталось или массив ошибок содержит ошибки, то возвращаем false
if ((str.length > 0 && str != "")|| errorArray[0] || errorArray[1] || errorArray[2] || errorArray[3] || errorArray[4] || count != 0) return false;
return true;
]]>
		</body>
	</do>
	<do access-modifier="private" name="CheckValueString" display-name="CheckValueString" ver="3" type="bool" type-id="7c9fe1ab-1ee2-42d8-939f-94ce3e89fca8">
		<body kind="javascript">
			<![CDATA[//Функция проверки корректности ввода значений типа string
var str = inputString;
//Инициализируем шаблоны
//повторение знаков
var mask1 = /[!]{2}|[=]{2}/g;
var count = 0;

//паттерн элемента
var elementPattern = /[(]|[)]|(НЕ)|(ИЛИ)|(И)|[!]|[&]|[|]|(\s*[А-Яа-я0-9A-Za-z ?!=;,._-]*[^&()|]\s*)/g;
//паттер оператора
var operatorPattern = /([&])|([ИЛИ]+)|([|])|(И)/g;
var errorArray = [];
var commonArray = [];

commonArray = str.match(elementPattern);
//опеределяем количество скобок
if (commonArray != null) 
{
	for (let i = 0; i < commonArray.length; i++)
	{
		if (commonArray[i] == "(") count++;
		if (commonArray[i] == ")") count--;
	}
}
//тестируем строку по каждому шаблону
errorArray.push(mask1.test(str));
//если в строке что-то осталось или массив ошибок содержит ошибки, то возвращаем false
if (errorArray[0] || count != 0) return false;
return true

]]>
		</body>
		<param access-modifier="private" name="inputString" display-name="" uuid="8a6ecd2e-417a-42c7-aec2-04c024d28ae4" base-type="string" base-type-id="76403785-f3d5-41a7-9eb6-d19d2aa2d95d" ver="3"/>
	</do>
	<do access-modifier="private" name="CheckValueDateTime" display-name="CheckValueDateTime" ver="3" type="bool" type-id="7c9fe1ab-1ee2-42d8-939f-94ce3e89fca8">
		<body kind="javascript">
			<![CDATA[//Функция проверки корректности ввода значений типа DateTime
var str = inputString;
//Инициализируем шаблоны
//последовательная запись аргументов
var mask1 = /(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})?\s*(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})?/g;
//повторение знаков
var mask2 = /[>]{2}|[<]{2}|[=]{2}|(><)|(<>)/g;
//наличие букв латинского алфавита
var mask3 = /\D[A-Za-z]/g;
//проверка на соответствие записи типа аргумент-операнд-аргумент
var mask4 =/[!><=]*((0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})*)*[()]*\s*(\&\s*(НЕ)?[!]?|И\s*(НЕ)?[!]?|ИЛИ\s*(НЕ)?[!]?|\|\s*(НЕ)?[!]?|\s*(НЕ)?\s*[!]?){1}\s*[()]*[!><=]+((0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})*)+/g;
//наличие кириллицы
var mask5 = /[А-Яа-я]/g;
var count = 0;
//общий паттерн
var elementPattern = /([(]|[)]|(НЕ)|(ИЛИ)|(И)|[!]|[&]|[|]|[<>=])/igu;
var errorArray = [];
var commonArray = [];

commonArray = str.match(elementPattern);
//опеределяем количество скобок
if (commonArray != null) 
{
	for (let i = 0; i < commonArray.length; i++)
	{
		if (commonArray[i] == "(") count++;
		if (commonArray[i] == ")") count--;
	}
}
//тестируем строку по каждому шаблону
errorArray.push(mask1.test(str));
errorArray.push(mask2.test(str));
errorArray.push(mask3.test(str));
//в этих случаях несовпадение с шаблоном = неправильная запись
str = str.replace(mask4,"");
errorArray.push(mask5.test(str));
//удаляем правильные совпадения
str = str.replace(/[!]*[><=]+(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})?/g,"");
str = str.replace(/[(]/g,"");
str = str.replace(/[)]/g,"");
//если в строке что-то осталось или массив ошибок содержит ошибки, то возвращаем false
if ((str.length > 0 && str != "")|| errorArray[0] || errorArray[1] || errorArray[2] || errorArray[3] || count != 0) return false;
return true;
]]>
		</body>
		<param access-modifier="private" name="inputString" display-name="" uuid="abb617a8-37b1-4730-9e04-0024bc80e8aa" base-type="string" base-type-id="76403785-f3d5-41a7-9eb6-d19d2aa2d95d" ver="3"/>
	</do>
	<do access-modifier="private" name="MakeRequestJSONViewFilter" display-name="MakeRequestJSONViewFilter" ver="2" type="string" type-id="76403785-f3d5-41a7-9eb6-d19d2aa2d95d">
		<body kind="javascript">
			<![CDATA[//Функция преобразует исходную строк в формат JSON: проводит поиск по шаблонам и составляет массив элементов, затем применяется обратная польская запись для определения порядка действий;
//определяются логические операторы и происходит поэтапное формирование логических выражений из элементов массива и происходит формирование строки в json формате
var resultArray = [];
var operatorArray = [];
var gravityPrev = 0;
var gravity = 0;
var objectInfo = {};
var prevPrevElem = '';
var prevElem = '';
var jsonStr = '';
var elementPattern;
var signPattern;
var argumentPattern;
var commonArrayStr;
var operatorPattern;
var tempArray =[];
try{
//Возвращаем пустую строку, если она на входе
if (inputString == "") return "";
//Проверка корректности ввода поля
if (source == "severity") if (!CheckValueInt(inputString)) return "error";
if (source == "time") if (!CheckValueDateTime(inputString)) return "error";
if (source == "message") if (!CheckValueString(inputString)) return "error";

//Инициализируем шаблон на поиск операторов, чисел и операндов
if (source == "severity")elementPattern = elementPattern = /[(]|[)]|(НЕ)|(ИЛИ)|(И)|[!]|[&]|[|]|[<>=\d*]+/igu;
else if (source == "time")elementPattern = elementPattern = /[(]|[)]|(НЕ)|(ИЛИ)|(И)|[!]|[&]|[|]|([<>=]+((0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})?)*)/igu;
else elementPattern = /[)]\s*(И)\s*[!]*(НЕ)*\s*[(]|[)]\s*(ИЛИ)\s*[!]*(НЕ)*\s*[(]|[)]\s*(&)\s*[!]*(НЕ)*\s*[(]|[)]\s*(\|)\s*[!]*(НЕ)*\s*[(]/g;
//Шаблон логического оператора
if (source == "severity" || source == "time") operatorPattern = /([(]|[)])|([&])|([ИЛИ]+)|([|])|(И)|(НЕ)|([!])/;
else operatorPattern = /^\s*([&])\s*$|^\s*(ИЛИ)\s*$|(^\s*[|]\s*$)|^\s*(И)\s*$|^\s*(НЕ)\s*$|(^\s*[!]\s*$)/;

//Шаблон знака
if (source == "severity" || source == "time")signPattern = /([><=]+)/g;
else signPattern = /([=]*)/g;
//Шаблон аргумента
if (source == "severity") argumentPattern = /(\d+)/;
else if (source == "time") argumentPattern = /((0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d\s([0-1]\d|2[0-3])(:[0-5]\d){2}(\.[0-9]{1,3})?)/;
else argumentPattern = /(.*)/;
//Шаблон массива
var arrayPattern = /object/;
//Заполняем массив символами строки
var commonArray = inputString.match(elementPattern);
//Обработка входной строки в случае работы с фильтром сообщений и источника
if (source != "severity" &&  source != "time")
{	
	//Логические операторы обозначаем знаками ^^, для разделения строки и записи в массив
	let temp = inputString.replace(elementPattern,'^$&^');
	tempArray = temp.split("^");
		//Если отсутствуют логические элементы
	if (tempArray.length == 1) 
	{
		//Если есть отрицание
		if (/[!]\s*[(]|(НЕ)\s*[(]/.test(tempArray[0])) 
		{
			if (/[!]\s*[(]/.test(tempArray[0])) 
			{
				tempArray[0] = tempArray[0].replace(/[!]/,"")
				tempArray.splice(0,0,"!");
			}
			if (/(НЕ)\s*[(]/g.test(tempArray[0])) 
			{
				tempArray[0] = tempArray[0].replace(/(НЕ)/,"")
				tempArray.splice(0,0,"НЕ");
			}
			tempArray[1] = tempArray[1].replace(/^[(]/,"");
			tempArray[1] = tempArray[1].replace(/[)]$/,"");
			
			if (!/[""].+[""]/g.test(tempArray[1])) tempArray[1] = tempArray[1].replace(/[А-Яа-яA-Za-z]+/,"*$&*");
			else tempArray[1] = tempArray[1].replace(/["]["]/g,"");
		}
		else
		{
			if (!/[""].+[""]/g.test(tempArray[0])) tempArray[0] = tempArray[0].replace(/[А-Яа-яA-Za-z]+/,"*$&*");
			else tempArray[0] = tempArray[0].replace(/["]["]/g,"");
		}
	}
	else{
	for (let i = 0; i < tempArray.length; i++)
	{
		//Если элемент - логический оператор
		if (elementPattern.test(tempArray[i])) 
		{	
			//удаляем скобки
			tempArray[i] = tempArray[i].replace(/[)(]/g,"");
			tempArray[i-1] = tempArray[i-1].replace(/^[(]/,"");
			tempArray[i+1] = tempArray[i+1].replace(/[)]$/,"");
			//В случае, если стоят двойные "", то элемент идет как точное соответствие
			if (!/[""].+[""]/g.test(tempArray[i-1])) tempArray[i-1] = tempArray[i-1].replace(/[А-Яа-яA-Za-z]+/,"*$&*");
			else tempArray[i-1] = tempArray[i-1].replace(/["]["]/g,"");
			if (!/[""].+[""]/g.test(tempArray[i+1]) && i == tempArray.length -2) tempArray[i+1] = tempArray[i+1].replace(/[А-Яа-яA-Za-z]+/,"*$&*");
			else tempArray[i+1] = tempArray[i+1].replace(/["]["]/g,"");
			//Обработка отрицаний
			if (/[!]/g.test(tempArray[i])) 
			{
				tempArray[i] = tempArray[i].replace(/[!]/,"");
				tempArray.splice(i+1,0,"!");
			}
			if (/НЕ/g.test(tempArray[i])) 
			{
				tempArray[i] = tempArray[i].replace(/НЕ/,"");
				tempArray.splice(i+1,0,"НЕ");
			}
		}
		else
		{
			//Обработка отрицаний
			if (/[!][(]/g.test(tempArray[i])) 
			{
				tempArray[i] = tempArray[i].replace(/[!]/,"");
				tempArray.splice(i,0,"!");
			}
			if (/(НЕ)[(]/g.test(tempArray[i])) 
			{
				tempArray[i] = tempArray[i].replace(/НЕ/,"");
				tempArray.splice(i,0,"НЕ");
			}
		}
	}
	}
	commonArray = tempArray;
}

//Если пустая строка, то возвращаем 0
if (commonArray == null) return "error";

//Функция опеределения веса оператора
function GravityValue(gravity)
{
	switch(gravity)
	{
		case 'И':
		case '&':
			gravity = 2;
			break;
		case 'ИЛИ':
		case '|':
			gravity = 1;
			break;
		case '(':
			gravity = 4;
			break;
		case ')':
			gravity = 5;
			break;
		case 'НЕ':
		case '!':
			gravity = 3;
			break;
	}
	return gravity;
}

//Фукнция получения выражения вида ">": { "severity": 10 }"
function MakeExpression(str)
{
	let sign;
	let number;
	let argument = str.match(argumentPattern);
	let expression = {};
	//Если фильтр по Важности, то заполняем строку в одном формате, отдельно по текстовому и временным полям
	if (source == 'severity')
	{
	 sign = str.match(signPattern);
	 expression = {[sign[0]]: parseInt(argument)};
	}
	else if (source == 'time')
			{
	 			sign = str.match(signPattern);
	 			//перед нахождением выражения здесь надо преобразовать строку времени в запись вида мм-дд-гг ч:м:с:мс
				expression = {[sign[0]]: Date.parse(argument[0].replace(/(\d+)\.(\d+)\.(\d+)/, '$2.$1.$3'))};
			}
	else expression = {"value": argument[0].toString().trim()};
	return expression;
}

//Проходим поэлементно массив
for (let i = 0; i < commonArray.length; i++)
{	
	//Если элемент - логический оператор
	if (operatorPattern.test(commonArray[i]))
	{
		commonArray[i] = commonArray[i].trim();
		gravity = GravityValue(commonArray[i]);
		//В случае, если "("
		if (gravity == 4) 
		{
			operatorArray.push(commonArray[i]);
			continue;
		}

		//В случае, если ")" - скобка закрылась
		if (gravity == 5)
		{
			let bracketIndex = operatorArray.lastIndexOf("(", operatorArray.length-1)
			//Операторы, что былт в скобках, записываем в результирующий массив
			while (operatorArray.length - 1 != bracketIndex)resultArray.push(operatorArray.pop());
			operatorArray.pop();
		}
	
		//В случае, если предыдущий оператор имеет больший вес - записываем в результирующий массив кроме случае со ()
		if (operatorArray.length != null) gravityPrev = GravityValue(operatorArray[operatorArray.length-1]);
		while (gravityPrev >= gravity && gravityPrev != 4 && gravityPrev != 5 && operatorArray.length != 0)
		{
			resultArray.push(operatorArray.pop());
			gravityPrev = GravityValue(operatorArray[operatorArray.length-1]);
		}
		
		//")" - не записываем
		if (gravity != 5) operatorArray.push(commonArray[i]);
	}
	else resultArray.push(commonArray[i]);
	
	//Если массив кончился - записываем остатки операндов в результирующий массив
	if (i == commonArray.length - 1)
	{
		while (operatorArray.length != 0)
		{
			resultArray.push(operatorArray.pop());
		}
	}
}

//Формирование JSON-строки
for (let i = 0; i < resultArray.length; i++)
{
	
	//Если всего один элемент в массиве, то выводим только это условие
	if (resultArray.length == 1) if (!arrayPattern.test(resultArray[i])) jsonStr = MakeExpression(resultArray[i]);
	//Если условий несколько
	if (operatorPattern.test(resultArray[i]) && resultArray.length > 1)
	{
		let notExpression;
		let operator = resultArray[i].match(/[&]|[|]|[!]|(ИЛИ)+|(И)|(НЕ)/);
		switch(operator[0])
		{
			case '&':
			case 'И':
				operator = 'AND';
				break;
			case '|':
			case 'ИЛИ':
				operator = 'OR';
				break;
			case '!':
			case 'НЕ':
				operator = 'NOT';
				//В случае, если есть отрицание, применяем к скобкам или выражению
				if (!arrayPattern.test(resultArray[i-1]))prevElem = MakeExpression(resultArray[i-1]);
				else prevElem = resultArray[i-1];
				notExpression = {'NOT': prevElem};
				jsonStr = JSON.stringify(notExpression);
				jsonStr = JSON.parse(jsonStr);
				resultArray.splice(i-1, 2, jsonStr);
				i-= 1;
				objectInfo = {};
				continue;
		}
		
		//Считываем элемент i-2 и i-1, если это не объекты - преобразуем
		if (!arrayPattern.test(resultArray[i-2]))prevPrevElem = MakeExpression(resultArray[i-2]);
		else prevPrevElem = resultArray[i-2];
		if (!arrayPattern.test(resultArray[i-1]))prevElem = MakeExpression(resultArray[i-1]);
		else prevElem = resultArray[i-1];;
		//Создаем объект с именем оператора, который является массивом и заполняем его
		objectInfo[`${operator}`] = [];
		objectInfo[objectInfo[`${operator}`].push(prevPrevElem)];
		objectInfo[objectInfo[`${operator}`].push(prevElem)];
		
		//записываем объект в виде строки
		jsonStr = JSON.stringify(objectInfo);
		jsonStr = JSON.parse(jsonStr);
		
		//Заменяем элементы i-2 и i-1 на полученное выражение
		resultArray.splice(i-2, 3, jsonStr);
		i-= 2;
		objectInfo = {};
		
		//В случае последнего прохода строку не обнуляем
		if (i >= 2) jsonStr = '';
	}
}
jsonStr = JSON.stringify(jsonStr);
if (jsonStr == '""') throw 'myException';
log(jsonStr);
return jsonStr;
}
catch(err)
{
return "error"
}
]]>
		</body>
		<param access-modifier="private" name="inputString" display-name="" uuid="94c437ea-dc7c-4590-b340-839d1a301c04" base-type="string" base-type-id="76403785-f3d5-41a7-9eb6-d19d2aa2d95d" ver="2"/>
		<param access-modifier="private" name="source" display-name="" uuid="2d748526-a04e-4371-be05-dfed3fc08435" base-type="string" base-type-id="76403785-f3d5-41a7-9eb6-d19d2aa2d95d" ver="2"/>
	</do>
	<do access-modifier="private" name="ReadTitle" display-name="ReadTitle" ver="3" type="" type-id="">
		<body kind="javascript">
			<![CDATA[//Заполняем заголовки столбцов
var Title = [], Column = [];
var str = "";
var hint = "";

Title[0] = Conditions.TimeGen;
Title[1] = Conditions.TimeRun;
Title[2] = Conditions.TimeDeactiv;
Title[3] = Conditions.Message;
Title[4] = Conditions.Source;
Title[5] = Conditions.Severity;
Title[6] = Conditions.AcknowledgeCondition.Acknow;
Title[7] = Conditions.AcknowledgeCondition.TimeAcknow;
Title[8] = Conditions.AcknowledgeCondition.User;
Title[9] = Conditions.AcknowledgeCondition.Comment;

Column[0] = Link_Alarms.Main_tables.Table_Operative_mode.Colum_1;
Column[1] = Link_Alarms.Main_tables.Table_Operative_mode.Colum_2;
Column[2] = Link_Alarms.Main_tables.Table_Operative_mode.Colum_3;
Column[3] = Link_Alarms.Main_tables.Table_Operative_mode.Colum_4;
Column[4] = Link_Alarms.Main_tables.Table_Operative_mode.Colum_5;
Column[5] = Link_Alarms.Main_tables.Table_Operative_mode.Colum_6;
Column[6] = Link_Alarms.Main_tables.Table_Operative_mode.Colum_7;
Column[7] = Link_Alarms.Main_tables.Table_Operative_mode.Colum_8;
Column[8] = Link_Alarms.Main_tables.Table_Operative_mode.Colum_9;
Column[9] = Link_Alarms.Main_tables.Table_Operative_mode.Colum_10;

//Если заголовок не входит в поле, то ставим многоточие и переносим полное имя в хинт
for (let i = 0; i < Title.length; i++)
{
	hint = "";
	str = Column[i].Title + ":";
	if (str.length > 25) 
	{
		hint = str;
		str = str.substr(0,22) + "...";
	}
	Title[i].Text_1.Text = str;
	Title[i].Text_1.Tooltip = hint;
}



]]>
		</body>
	</do>
	<object access-modifier="private" name="Window_close_line_1" display-name="Window_close_line_1" uuid="d15d863f-90c3-4dca-b6d5-86584a77c88e" base-type="Window_close_line" base-type-id="a70c35c1-3cb9-4d9e-8668-ddc931acbcf8" ver="3">
		<designed target="X" value="1" ver="3"/>
		<designed target="Y" value="1" ver="3"/>
		<designed target="Rotation" value="0" ver="3"/>
		<object access-modifier="private" name="mousePress" display-name="mousePress" uuid="b44107e9-6a5d-407d-832d-c7d1f71eead0" base-type="notifying_bool" base-type-id="f8797810-1baa-4a1f-af36-cf839bf252e8" ver="3"/>
		<do-on access-modifier="private" name="Handler_2" display-name="Handler_2" ver="3" event="MouseMove">
			<body kind="om">
				<![CDATA[if (mousePress) 
{
	here.WindowX = ScreenX(MouseX,MouseY) - TypeConvert.ToInt4(Pointer_press_x);
	here.WindowY = ScreenY(MouseX,MouseY);
}]]>
			</body>
		</do-on>
		<do-on access-modifier="private" name="Handler_3" display-name="Handler_3" ver="3" event="MousePress">
			<body kind="om">
				<![CDATA[mousePress = true;
Pointer_press_x = MouseX;
]]>
			</body>
		</do-on>
		<do-on access-modifier="private" name="Handler_4" display-name="Handler_4" ver="3" event="MouseRelease">
			<body kind="om">
				<![CDATA[mousePress = false;]]>
			</body>
		</do-on>
		<object access-modifier="private" name="Pointer_press_x" display-name="Pointer_press_x" uuid="5e6e4c46-c299-4b54-bea0-e9d414577bb7" base-type="float8" base-type-id="7ad62ecf-96dd-4751-9b96-e77954b44409" ver="3"/>
		<object access-modifier="private" name="notifying_WindowWidth_now" display-name="notifying_WindowWidth_now" uuid="15c4ee8c-9fba-42fc-bdad-8b34ee901739" base-type="notifying_float8" base-type-id="3f905fb7-7738-4619-b402-5a91f136d4bd" ver="3">
			<do-on access-modifier="private" name="Handler_1" display-name="Handler_1" ver="3" event="ValueChanged">
				<body kind="om">
					<![CDATA[Window_close_line_1.Rectangle_windowline_base.Width = notifying_WindowWidth_now.Value - 2;
Window_close_line_1.Rectangle_windowline_base.Text_windowname.Width = Window_close_line_1.Rectangle_windowline_base.Width;

Window_close_line_1.Rectangle_windowline_base.Window_close_button_1.X = Window_close_line_1.Rectangle_windowline_base.Width - 22;
]]>
				</body>
			</do-on>
		</object>
	</object>
</type>

